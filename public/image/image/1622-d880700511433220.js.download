!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="cebc7f1a-e093-42ea-9c2b-4f25183593f1",e._sentryDebugIdIdentifier="sentry-dbid-cebc7f1a-e093-42ea-9c2b-4f25183593f1")}catch(e){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1622],{72849:function(e,t,i){i.d(t,{u:function(){return y}});var n=i(57437),a=i(2265),l=i(98140),r=i(75161),o=i(23713),s=i(63251),c=i(21652),d=i.n(c),u=i(43228),g=i.n(u),m=i(46075),h=i.n(m),p=i(53852),f=i.n(p);let b=(e,t)=>{let i=h()(t,"__typename"),n=f()(h()(e,"__typename"),g()(t));return d()(i,n)};var x=i(98271),v=i(54944),w=i(79488);let C=(e,t)=>{let i=(0,s.x)(),n=(0,a.useCallback)(n=>{if(!n.complete)return;let a=!1,l=e.reduce((e,t)=>t.id!==n.data.id?i.readFragment({id:(0,w.oi)(t.id),fragment:v.Gj$})?[...e,t]:(a=!0,e):b(t,n.data)?[...e,t]:(a=!0,[...e,{...t,...n.data}]),[]);(a||l.length!==e.length)&&t(l)},[t,e,i]),l=(0,x.z)(n,r.K,[t,e,i]);return(0,a.useEffect)(()=>{let t=e.map(e=>i.cache.watchFragment({from:(0,w.oi)(e.id),fragment:v.Ewz,optimistic:!1}).subscribe(l));return()=>{t.forEach(e=>e.unsubscribe())}},[e,i,l]),[e,t]};var j=i(39954);let y=e=>{let{children:t}=e,{userSelectedTeam:i}=(0,j.P)(),s=i(),c=null==s?void 0:s.id,d=(0,l.j)({selectedItems:r.E.selectedImages,isSelectingItems:r.E.isSelectingImages}),[u,g]=C(d.selectedItems,d.setSelectedItems),m=u.map(e=>e.id),h=(0,a.useMemo)(()=>({isSelectingImages:d.isSelectingItems,selectedImages:u,selectedImageIds:m,clearSelectedImages:d.clearSelectedItems,setIsSelectingImages:d.setIsSelectingItems,toggleImageSelection:d.toggleItemSelection,isDragSelectingImages:d.isDragSelectingItems,toggleImageDragSelect:d.toggleItemDragSelect,setSelectedImages:g}),[d,u,g,m]);return(0,n.jsx)(o.s.Provider,{value:h,children:t},c)}},98271:function(e,t,i){i.d(t,{z:function(){return r}});var n=i(37065),a=i.n(n),l=i(2265);function r(e,t,i){let n=(0,l.useRef)(e);return(0,l.useEffect)(()=>{n.current=e},[e]),(0,l.useCallback)(a()(function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];n.current(...t)},t),i)}},39935:function(e,t,i){var n=i(57437),a=i(72760),l=i(20765),r=i(25730),o=i(51023),s=i(39954),c=i(57211),d=i(8566),u=i(21457);let g=e=>{let{isGenerationProcessing:t,isPublic:i}=e;return t?(0,n.jsx)(a.$,{size:"sm"}):i?(0,n.jsx)(c.Z,{color:"white"}):(0,n.jsx)(d.Z,{color:"white"})};t.Z=e=>{let{isGenerationProcessing:t,isPublic:i,onMouseOver:a,onMouseLeave:c,...d}=e,{isUserFreePlan:m}=(0,u.usePlan)(),{isFreePlanElevated:h}=(0,o.V)(),{userSelectedTeam:p}=(0,s.P)(),f=p(),b=m&&!h?"This image is public. Please subscribe to a paid plan if you wish to generate private images.":"This image is public",x="This image is private.";return f.id&&(b="This image is visible in the Team Feed",x="This image is not visible in the Team Feed"),(0,n.jsx)(l.u,{hasArrow:!0,placement:"top",shouldWrapChildren:!0,label:i?b:x,children:(0,n.jsx)(r.h,{icon:(0,n.jsx)(g,{isGenerationProcessing:t,isPublic:i}),pointerEvents:"auto","aria-label":"visibility indicator",onMouseOver:a,onMouseLeave:c,zIndex:4,...d})})}},42751:function(e,t,i){i.d(t,{W:function(){return eL}});var n=i(57437),a=i(5298),l=i(68499),r=i(4231),o=i(13449),s=i(1677),c=i(30166),d=i(99376),u=i(2265),g=i(36094),m=i(66242);let h=(e,t,i)=>1===e?t:i,p=e=>0===e?"No images":"".concat(e," ").concat(h(e,"image","images")),f=e=>e>0?"".concat(e," ").concat(h(e,"variation","variations")):"",b=e=>e>0?"".concat(e," ").concat(h(e,"collection","collections")):"",x=e=>{let{imageCount:t,variationsCount:i,collectionsCount:n}=e,a=[];if(n>0&&a.push(b(n)),t>0&&a.push(p(t)),i>0&&a.push(f(i)),0===a.length)return"No images selected";if(1===a.length)return"".concat(a[0]," selected");if(2===a.length)return"".concat(a[0]," and ").concat(a[1]," selected");let l=a.pop();return"".concat(a.join(",")," and ").concat(l," selected")};var v=i(20765),w=i(86333),C=i(77951),j=i(4360),y=i(70996),k=i(46402),I=i(74015),_=i(54658),D=i(298),M=i(82030),E=i(45741),T=i(97889),P=i(52335);let Z=e=>{let{isLoading:t,onDownloadOriginalImages:i,onDownloadAllImages:a,imageCount:l,handleOpenBuyModal:r,...c}=e,{hasPermission:d}=(0,M.T)(),u=!d("bulkDownload","create")&&l>1;return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(v.u,{isDisabled:!u,hasArrow:!0,closeOnClick:!1,shouldWrapChildren:!0,label:"Unlock bulk actions and more with Leonardo Premium!",children:(0,n.jsxs)(w.v,{...u?{isOpen:!1}:{},children:[(0,n.jsxs)(o.k,{position:"relative",width:"100%",children:[(0,n.jsxs)(C.j,{isDisabled:0===l,...u?{onClick:r}:{},as:s.z,isLoading:t,width:"fit-content",size:"sm",variant:"outline",fontSize:"sm",fontWeight:500,bg:"background.darkblue",borderColor:"border.greyBlue",py:2,pl:4,pr:u?6:4,borderRadius:"lg",display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",...c,children:[(0,n.jsx)(E.Z,{boxSize:4,mr:2}),(0,n.jsx)(j.x,{as:"span",children:"Download"}),(0,n.jsx)(_.Z,{boxSize:2,ml:2})]}),u&&(0,n.jsx)(y.xu,{position:"absolute",top:0,right:0,width:"fit-content",maxH:"max-content",bg:"gradient.main",borderRadius:"0 0.5rem",cursor:"pointer",children:(0,n.jsx)(D.Z,{display:"flex",width:"1rem",height:"1rem",m:"0.05rem"})})]}),(0,n.jsxs)(k.q,{minWidth:48,bg:"border.nobleBlack",p:0,border:"none",children:[(0,n.jsxs)(I.s,{as:s.z,borderBottomRadius:0,bg:"border.nobleBlack",display:"flex",alignItems:"center",justifyContent:"flex-start",onClick:u?r:i,children:[(0,n.jsx)(y.xu,{mr:1.5,children:(0,n.jsx)(T.Z,{fill:"white",width:"1.25rem",height:"1.25rem"})}),"Original images"]}),(0,n.jsxs)(I.s,{as:s.z,borderTopRadius:0,bg:"border.nobleBlack",display:"flex",alignItems:"center",justifyContent:"flex-start",onClick:u?r:a,children:[(0,n.jsx)(y.xu,{mr:1.5,children:(0,n.jsx)(P.Z,{fill:"white",width:"1.125rem",height:"1.125rem"})}),"All images"]})]})]})})})};var z=i(12162);let O=e=>{let{imageCount:t,onPaymentOptionsOpen:i,openDeleteConfirmation:a,onRemoveImagesOpen:l,showRemoveCollection:r,canTeamMemberDelete:c,...d}=e,{hasPermission:u}=(0,M.T)(),g=u("generation","delete");return(0,n.jsx)(v.u,{isDisabled:null!==c?g&&!!c||r:g||r,hasArrow:!0,closeOnClick:!1,label:c?"Unlock removing images and more with Leonardo Premium!":"You don't have permission to delete team members images.",shouldWrapChildren:!0,children:(0,n.jsxs)(o.k,{position:"relative",children:[(0,n.jsx)(s.z,{isDisabled:null!==c?(0===t||!c)&&!r:0===t&&!r,"aria-label":"Remove",bg:"background.darkblue",borderColor:"border.greyBlue",fontWeight:500,borderRadius:"lg",leftIcon:(0,n.jsx)(z.Z,{}),onClick:()=>{if(r){l();return}if(g){a();return}i()},variant:"outline",h:8,flex:1,paddingLeft:4,paddingRight:g?4:6,...d,children:"Remove"}),!g&&(0,n.jsx)(y.xu,{position:"absolute",top:0,right:0,width:"fit-content",maxH:"max-content",bg:"gradient.main",borderRadius:"0 0.5rem",cursor:"pointer",children:(0,n.jsx)(D.Z,{display:"flex",width:"1rem",height:"1rem",m:"0.05rem"})})]})})};var R=i(93340),S=i(91271),A=i(23713),L=i(8566),B=i(6395),H=i(63075),W=i(51023),F=i(39954),U=i(97923),G=i(21457),V=i(86067),N=i(43434);let q=e=>{let{isTeamSelected:t,isFirstImagePublic:i}=e;return t?i?"Hide in Team Feed":"Show in Team Feed":i?"Make Private":"Make Public"},Y=e=>{let{isFirstImagePublic:t,hasReadOnlySelectedImages:i,shouldShowPremiumIcon:n}=e;return i?t?"You don't have permission to hide team members images.":"You don't have permission to show team members images.":n?"Unlock private generations and more with Leonardo Premium!":void 0},$=e=>{let{openBuyModal:t}=e,{loading:i,updateImagePrivacy:a}=(0,U.ob)(),{userSelectedTeam:l}=(0,F.P)(),{selectedImages:r}=(0,A.V)(),{isUserFreePlan:c}=(0,G.usePlan)(),{openCollectionPrivacyWarning:u}=(0,S.P)(),{isFreePlanElevated:g}=(0,W.V)(),m=(0,V.I)(),h=(0,d.usePathname)(),p=null==h?void 0:h.startsWith(H.l.TEAM_FEED),f=l(),b=!!f.id,x=!!(r.length>0&&r[0].isPublic),w=f.userRole!==R.TEAM_ROLE_TYPE.OWNER&&r.some(e=>e.teamId&&e.userId!==m),C=!b&&c&&!g,j=(b||!c)&&!w,k=0===r.length||w,I=q({isTeamSelected:b,isFirstImagePublic:x}),_=Y({isFirstImagePublic:x,shouldShowPremiumIcon:C,hasReadOnlySelectedImages:w}),M=async()=>{if(!j){t();return}if(0===r.length)return;let e=!r[0].isPublic;await a(r.map(e=>e.id),e,p)&&r.find(e=>{var t;return!!(null===(t=e.collection_images)||void 0===t?void 0:t.length)})&&b&&!e&&u()},E=x?(0,n.jsx)(L.Z,{color:"white",height:4,width:4}):(0,n.jsx)(B.Z,{color:"white",width:4,height:4});return(0,n.jsx)(v.u,{isDisabled:!_,hasArrow:!0,closeOnClick:!1,textAlign:"center",bgColor:"button.input",label:_,placement:"top",shouldWrapChildren:!0,children:(0,n.jsxs)(o.k,{position:"relative",children:[(0,n.jsx)(s.z,{"aria-label":I,leftIcon:E,isLoading:i,isDisabled:k,size:{base:"sm"},variant:"outline",onClick:M,fontSize:"sm",borderColor:"border.greyBlue",bg:w?N.HW.GRAY_DISABLED_BUTTON_BG:"background.darkblue",fontWeight:500,color:"white",py:2,paddingInline:{base:"1.5 !important",lg:"4 !important"},borderRadius:"lg",width:"100%",children:I}),C&&(0,n.jsx)(y.xu,{position:"absolute",top:0,right:0,width:"fit-content",maxH:"max-content",bg:"gradient.main",borderBottomLeftRadius:"0.25rem",borderTopRightRadius:"0.25rem",cursor:"pointer",children:(0,n.jsx)(D.Z,{display:"flex",width:"1rem",height:"1rem",m:"0.05rem"})})]})})};var J=i(24611),K=i(93356);let X=()=>{let{setIsSelectingImages:e,clearSelectedImages:t}=(0,A.V)(),{clearSelectedCollections:i}=(0,J.gs)();return(0,n.jsx)(s.z,{"aria-label":"Exit mode",leftIcon:(0,n.jsx)(K.Z,{color:"white"}),size:"sm",variant:"outline",onClick:()=>{e(!1),t(),i()},fontSize:"sm",borderColor:"border.greyBlue",bg:"background.darkblue",fontWeight:500,color:"white",py:2,paddingInline:{base:"1.5 !important",xl:"3 !important"},borderRadius:"lg",children:"Exit mode"})};var Q=i(8196),ee=i(49911),et=i(21788),ei=i(16152),en=i(86827),ea=i(26262),el=i(31631),er=i(58055),eo=i(72760),es=i(66896),ec=i(28104);let ed=()=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(j.x,{mb:"calc(".concat(ec.cM," * 2.75) !important"),color:"#DBDBDB",opacity:.5,children:"If it is the only image within the generation, the generation will also be deleted."}),(0,n.jsx)(j.x,{mb:"calc(".concat(ec.cM," * 2.75) !important"),color:"#FF8600",children:"If you are deleting the original image, all upscales and transparent images will be deleted as well."})]});var eu=e=>{let{isOpen:t,onClose:i,deleteImage:a,loading:l,variation:r,title:o}=e;return(0,n.jsxs)(Q.u_,{isOpen:t,onClose:i,closeOnOverlayClick:!0,isCentered:!0,children:[(0,n.jsx)(ee.Z,{}),(0,n.jsx)(et.h,{px:2,py:5,textAlign:"center",children:(0,n.jsx)(ei.f,{children:(0,n.jsx)(en.M,{children:(0,n.jsxs)(ea.g,{maxW:"calc(".concat(ec.cM," * 39.125)"),children:[(0,n.jsx)(en.M,{mb:"calc(".concat(ec.cM," * 0.9375)"),children:(0,n.jsx)(es.Z,{})}),(0,n.jsx)(el.X,{size:"lg",fontWeight:600,mb:"calc(".concat(ec.cM," * 1.125)"),children:o}),(0,n.jsx)(j.x,{mb:"calc(".concat(ec.cM," * 0.5) !important"),color:"#DBDBDB",opacity:.5,children:"If you confirm, these will be impossible to recover."}),r?(0,n.jsx)(ed,{}):null,(0,n.jsxs)(er.U,{spacing:{base:"calc(".concat(ec.cM," * 1)"),xs:"calc(".concat(ec.cM," * 2.25)")},justify:"center",width:"100%",children:[(0,n.jsx)(s.z,{py:4,width:"50%",variant:"outline",onClick:i,isDisabled:l,children:"Cancel"}),(0,n.jsx)(s.z,{isDisabled:l,onClick:async()=>{a()},py:4,width:"50%",variant:"solid",backgroundColor:N.DM.ORANGE,leftIcon:l?(0,n.jsx)(eo.$,{w:4,h:4}):void 0,children:"Delete"})]})]})})})})]})},eg=i(3524),em=i(25730),eh=i(29360),ep=i(27790),ef=i(693),eb=i(48946),ex=i(30671),ev=i(80954);let ew=(0,c.default)(()=>i.e(7577).then(i.bind(i,67577)).then(e=>e.TokensRunningLowUpgradeModal),{loadableGenerated:{webpack:()=>[67577]}});var eC=e=>{let{isOpen:t,onClose:i,deleteImage:a,removeImage:l,loading:r}=e,{open:o}=(0,ex.Z)(ev.Z.UPGRADE),{isUserFreePlan:c}=(0,G.usePlan)(),[d,g]=(0,u.useState)();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(Q.u_,{isOpen:t,onClose:i,closeOnOverlayClick:!0,isCentered:!0,children:[(0,n.jsx)(ee.Z,{}),(0,n.jsx)(et.h,{px:8,py:10,textAlign:"center",children:(0,n.jsx)(ei.f,{children:(0,n.jsx)(en.M,{children:(0,n.jsxs)(ea.g,{maxW:{base:88,md:"md"},children:[(0,n.jsx)(en.M,{mb:4,children:d?(0,n.jsx)(es.Z,{}):(0,n.jsx)(eb.Z,{})}),(0,n.jsx)(el.X,{size:"lg",fontWeight:600,children:d?"Are you sure you want to delete this image?":"Are you sure you want to remove this image?"}),(0,n.jsxs)(ea.g,{mb:6,children:[(0,n.jsx)(j.x,{fontWeight:"normal",children:"Removing images from a collection doesn't affect the source image. To delete an image permanently from all locations, check the box below."}),(0,n.jsx)(v.u,{isDisabled:!c,hasArrow:!0,placement:"bottom",label:"Bulk delete is available to premium users only",children:(0,n.jsxs)(er.U,{pt:6,onClick:()=>{c&&o()},children:[(0,n.jsx)(eg.X,{variant:"alternative",disabled:c,isChecked:d,onChange:e=>g(e.target.checked),children:"Delete source images"}),c&&(0,n.jsxs)(er.U,{children:[(0,n.jsx)(em.h,{"aria-label":"Upgrade",size:"xs",bg:"linear-gradient(81deg, #D951A5 13.83%, #B14BF4 49.5%, #6E7BFC 85.32%)",_hover:{bg:"linear-gradient(81deg, #D951A5 13.83%, #B14BF4 49.5%, #6E7BFC 85.32%)"},color:"white",rounded:"md",icon:(0,n.jsx)(D.Z,{width:4,height:4})}),(0,n.jsx)(y.xu,{children:(0,n.jsx)(ef.Z,{})})]})]})})]}),(0,n.jsxs)(eh.K,{direction:{base:"column",md:"row"},spacing:{base:4,xs:9},justify:"center",width:"100%",children:[(0,n.jsx)(s.z,{py:4,width:{base:"100%",md:"50%"},variant:"outline",onClick:i,isDisabled:r,children:"Cancel"}),d?(0,n.jsx)(s.z,{isLoading:r,isDisabled:r,onClick:a,py:4,width:{base:"100%",md:"50%"},variant:"solid",backgroundColor:N.DM.ORANGE,leftIcon:r?(0,n.jsx)(eo.$,{w:4,h:4}):void 0,children:"Delete Image Everywhere"}):(0,n.jsx)(s.z,{isLoading:r,isDisabled:r,onClick:l,py:4,width:{base:"100%",md:"50%"},variant:"glow",children:"Remove from Collection"})]})]})})})})]}),(0,n.jsx)(ep.default,{}),(0,n.jsx)(ew,{})]})},ej=i(64741),ey=i(13856),ek=e=>(0,n.jsxs)(ey.J,{viewBox:"0 0 17 16",fill:"none",...e,children:[(0,n.jsx)("path",{d:"M7.97279 8.2233C8.04646 8.4007 8.04646 8.60136 7.97279 8.77876C7.93595 8.86794 7.88276 8.94839 7.81588 9.01528L5.8771 10.9541C5.73557 11.0956 5.54942 11.1673 5.3633 11.1673C5.17718 11.1673 4.99103 11.0966 4.8495 10.9541C4.56547 10.67 4.56547 10.2096 4.8495 9.92553L5.54743 9.22757H1.08056C0.679229 9.22757 0.353516 8.90185 0.353516 8.50053C0.353516 8.0992 0.679229 7.77349 1.08056 7.77349H5.54648L4.84855 7.07553C4.56452 6.7915 4.56452 6.33104 4.84855 6.04701C5.13258 5.76298 5.59307 5.76298 5.8771 6.04701L7.81588 7.98578C7.88276 8.05461 7.93595 8.13509 7.97279 8.2233Z",fill:"currentColor"}),(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.37398 4.16669H12.5C14.112 4.16669 14.9999 5.05469 15.0006 6.66669V11.3334C15.0006 12.9454 14.1126 13.8334 12.5006 13.8334H4.50061C2.88861 13.8334 2.00061 12.9454 2.00061 11.3334V10.5007H2.99996V11.3334C2.99996 12.3847 3.44863 12.8334 4.49996 12.8334H12.5C13.5513 12.8334 14 12.3847 14 11.3334L13.9993 6.66669C13.9993 5.61535 13.5506 5.16669 12.4993 5.16669H9.16597C9.03331 5.16669 8.90662 5.11402 8.81262 5.02002L6.95927 3.16669H4.49996C3.44863 3.16669 2.99996 3.61535 2.99996 4.66669V6.50067H2.00061V4.66669C2.00061 3.05469 2.88861 2.16669 4.50061 2.16669H7.16728C7.29994 2.16669 7.42663 2.21935 7.52063 2.31335L9.37398 4.16669Z",fill:"currentColor"})]}),eI=i(67354),e_=i(54944),eD=i(28212),eM=i(23721),eE=i(12199),eT=i(26089);let eP=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{update:t,...i}=e,[n,a]=(0,eE.D)(e_.pKI,{...i,update(e,i,n){var a,l;let r=(0,eT.L)(e),o=!1;null==i||null===(l=i.data)||void 0===l||null===(a=l.delete_generations)||void 0===a||a.returning.forEach(t=>{o=(0,eT.Q)(e,r,t.id)||o;let i=e.identify({id:t.id,__typename:"generations"}),n=e.evict({id:i});o||(o=n)}),o&&e.gc(),null==t||t(e,i,n)}});return[(0,u.useCallback)((e,t)=>n({variables:{ids:e},...t}),[n]),a]},eZ=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{update:t,...i}=e,[n,a]=(0,eE.D)(e_.pmy,{...i,update(e,i,n){var a,l;null===(l=i.data)||void 0===l||null===(a=l.delete_generated_images)||void 0===a||a.returning.forEach(t=>{let i=e.identify({id:t.id,__typename:"generated_images"});e.evict({id:i})}),null==t||t(e,i,n)}});return[(0,u.useCallback)(e=>n({variables:{ids:e}}),[n]),a]};var ez=i(7174),eO=i(43845);let eR=(0,c.default)(()=>Promise.all([i.e(1128),i.e(2653),i.e(2999),i.e(1205)]).then(i.bind(i,12630)).then(e=>e.default),{loadableGenerated:{webpack:()=>[12630]}}),eS=e=>e.reduce((e,t)=>{var i;return e+((null===(i=t.variations)||void 0===i?void 0:i.length)||0)},0),eA=(e,t)=>{let i=eS(t);return"Are you sure you want to delete ".concat(p(e)).concat(f(i),"?")},eL=e=>{let t,{showRemoveCollection:i,showCollectionTree:c,collection:h,onConfirmationClose:p,onDeleteCallback:f,pl:b={base:2,md:6},pr:v={base:2,md:6}}=e,{isOpen:w,onClose:C,onOpen:j}=(0,l.q)(),{isOpen:y,onClose:k,onOpen:I}=(0,l.q)(),{isOpen:_,onClose:D,onOpen:E}=(0,l.q)(),T=(0,V.I)(),{userSelectedTeam:P}=(0,F.P)(),z=!!P(),R=(0,eO.Z)(),{hasPermission:L}=(0,M.T)(),B=L("generation","delete"),H=L("bulkDownload","create"),{isCreatingCollectionImages:W,isDeletingCollectionImages:U,isUpdatingCollectionsLoading:G,handleAddCollectionImage:N,handleRemoveCollectionImage:q}=(0,eD.Z)(),{showCollectionImagesToast:Y}=(0,eM.Z)(),{isSelectingImages:K,selectedImages:Q,setIsSelectingImages:ee,clearSelectedImages:et}=(0,A.V)(),{selectedCollections:ei}=(0,J.gs)(),{isLibraryCollections:en,isTeamFeedYourCollections:ea,isTeamFeedTeamCollections:el}=(0,ez.f)(),{openCollectionPrivacyWarning:er}=(0,S.P)(),eo=(0,u.useCallback)(()=>{null==p||p(),et(),ee(!1),f(),C(),k()},[et,p,C,f,k,ee]),[es,{loading:ec}]=eZ({onCompleted:eo}),[ed,{loading:eg}]=eP({onCompleted:eo}),em=ec||eg||G||W||U,eh=(0,u.useCallback)(()=>{j()},[j]),{download:ep,isZipLoading:ef}=(0,ej.Z)({images:Q,includeVariations:!1,filename:"original_images"}),{download:eb,isZipLoading:ex}=(0,ej.Z)({images:Q,includeVariations:!0,filename:"all_images"}),[ev]=(0,a.t)(e_.zzV,{}),ew=async()=>{let e=Q.map(e=>e.id),t=new Set,i=[];if(e.length>0){for(let e of Q)t.add(e.generationId);await es(e);let a=Array.from(t);if(a)for(let e of a){var n;let{data:t}=await ev({variables:{generationId:e},fetchPolicy:"network-only"});0===((null==t?void 0:null===(n=t.generated_images_aggregate.aggregate)||void 0===n?void 0:n.count)||0)&&i.push(e)}}i.length>0&&ed(i,{refetchQueries:[{query:e_.M7g,variables:{where:{userId:{_eq:T}}}}]})},ey=async e=>{e&&Q&&await q(e,Q,(e,t,i,n)=>{Y(e,t,i,n),k(),et()})},eE=async(e,t)=>{e&&t&&await N(e,t,(e,t,i,n)=>Y(e,t,i,n))},eT=async(e,t)=>{e&&(Q.find(e=>!e.isPublic)&&z&&t&&er(),t?await eE(e,Q):await ey(e))},eL=Q.length,eB=en||ea||el,eH=eB&&ei.length,eW=eS(Q),eF=(0,d.useParams)();eB&&(t=Array.isArray(null==eF?void 0:eF.id)?null==eF?void 0:eF.id[0]:null==eF?void 0:eF.id);let[eU,eG]=(0,u.useState)(!1),eV=(0,u.useCallback)(e=>{eG(e)},[]);return!eU||Q.length||ei.length||eG(!1),(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(r.U,{in:K,animateOpacity:!0,style:{zIndex:1},children:[(0,n.jsxs)(o.k,{bg:"#181F2F",flexWrap:"wrap",alignItems:"center",justifyContent:"space-between",rowGap:2,columnGap:2,py:2,pl:b,pr:v,children:[(0,n.jsx)(o.k,{display:{base:"none","2xl":"flex"},alignItems:"center",fontSize:"sm",whiteSpace:"nowrap",children:(0,n.jsx)(x,{imageCount:eL,variationsCount:eW,collectionsCount:ei.length})}),(0,n.jsxs)(o.k,{gap:2,flexWrap:"wrap",display:{base:"grid","2xl":"flex"},gridTemplateColumns:{base:"1fr",sm:"1fr 1fr",md:"repeat(auto-fit, minmax(10rem, 1fr))",lg:"1fr 1fr 1fr"},justifyContent:{base:"flex-start",lg:"flex-end","2xl":"flex-end"},flex:1,children:[(0,n.jsx)(o.k,{display:{base:"flex","2xl":"none"},alignItems:"center",fontSize:"sm",whiteSpace:"nowrap",children:(0,n.jsx)(x,{imageCount:eL,variationsCount:eW,collectionsCount:ei.length})}),(!B||!H)&&(0,n.jsx)(s.z,{onClick:E,variant:"gradient",fontWeight:"semibold",borderRadius:"1.875rem",size:"sm",w:{base:"full",sm:20},height:8,color:"white",transition:"none",justifySelf:"flex-end",children:"Upgrade"}),(0,n.jsx)($,{openBuyModal:E}),c&&(eH?(0,n.jsx)(g.e,{displayText:"Move to",icon:(0,n.jsx)(ek,{boxSize:4.5,mr:2}),mode:m.MC.MOVE,textAlign:"center",selectedImages:Q,onCollectionChecked:eT,currentCollectionId:t,isOpen:eU,onOpenChange:eV}):(0,n.jsx)(g.e,{displayText:"Organize",rounded:"lg",icon:(0,n.jsx)(eI.Z,{boxSize:4.5,mr:2}),mode:m.MC.UPDATE,textAlign:"center",selectedImages:Q,onCollectionChecked:eT,currentCollectionId:t,isOpen:eU,onOpenChange:eV})),(0,n.jsx)(Z,{isLoading:ef||ex,onDownloadOriginalImages:ep,onDownloadAllImages:eb,imageCount:eL,handleOpenBuyModal:E,width:"100%"}),(0,n.jsx)(O,{imageCount:eL,onPaymentOptionsOpen:E,openDeleteConfirmation:eh,justifyContent:"center",onRemoveImagesOpen:I,showRemoveCollection:i,canTeamMemberDelete:z?(()=>{let e=Q.some(e=>e.userId!==T);return!!R||!e})():null}),(0,n.jsx)(X,{})]})]}),(0,n.jsx)(eu,{title:eA(eL,Q),isOpen:w,onClose:C,deleteImage:ew,loading:em}),(0,n.jsx)(eC,{isOpen:y,onClose:k,deleteImage:ew,removeImage:()=>ey(h),loading:em}),_&&(0,n.jsx)(eR,{isOpen:_,onClose:D})]})})}},64741:function(e,t,i){i.d(t,{Z:function(){return u}});var n=i(12),a=i(57635),l=i.n(a),r=i(2265);let o=e=>{let{url:t,id:i}=e,{filename:n,extension:a}=s(t.split("/").pop()||""),l=n.includes(i),r=n;if(l||(r="".concat(r,"_").concat(i)),"transformType"in e&&e.transformType){let{transformType:t,oneClickType:i}=e,n="".concat(t).concat(i?"_".concat(i):"");r="".concat(r,"_").concat(n)}return"".concat(r).concat(a).toLocaleLowerCase()},s=e=>{let t=e.split("."),i="."+t.pop();return{filename:t.join("."),extension:i}},c=e=>{let t=[];return e.forEach(e=>{let{url:i,variations:n,id:a}=e;if(t.push({id:a,url:i,transformType:null,oneClickType:null}),null==n?void 0:n.length){let e=n.map(e=>{var t;let{id:i,url:n,transformType:a,upscale_details:l}=e;return{id:i,url:n,transformType:a,oneClickType:null===(t=l[0])||void 0===t?void 0:t.oneClicktype}}).filter(e=>!!e.url);t.push(...e)}}),t};var d=i(65898),u=e=>{let{images:t,includeVariations:i,filename:a,mapToSelectedImage:s}=e,u=(0,d.Z)(),[g,m]=(0,r.useState)(!1);return{download:(0,r.useCallback)(async()=>{m(!0);let e=new(l()),r=e.folder(a),g=s?t.map(s):t,h=[],p=[],f=[];g.forEach(e=>{e.motionMp4Url?p.push(e):e.motionGifUrl?f.push(e):e.url&&h.push(e)});let b=i?c(h):h;try{if(r){let t=b.map(async e=>{let{url:t}=e,i=await fetch(t);if(!i.ok)throw Error("HTTP error! status: ".concat(i.status));let n=await i.blob(),a=o(e);r.file(a,n)}),i=p.map(async(e,t)=>{let{motionMp4Url:i}=e,n=await fetch(i);if(!n.ok)throw Error("HTTP error! status: ".concat(n.status));let a=await n.blob();r.file("motion_".concat(t+1,".mp4"),a)}),l=f.map(async(e,t)=>{let{motionGifUrl:i}=e,n=await fetch(i);if(!n.ok)throw Error("HTTP error! status: ".concat(n.status));let a=await n.blob();r.file("motion_gif_".concat(t+1,".gif"),a)});await Promise.all([...t,...i,...l]);let s=await e.generateAsync({type:"blob"});(0,n.saveAs)(s,a)}else throw Error("Unable to create zip folder.")}catch(e){console.error("useDownloadImages(): ".concat(e.message)),u({title:"Error",description:"There was an error downloading.",type:d.N.error})}finally{m(!1)}},[a,t,i,s,u]),isZipLoading:g}}},97137:function(e,t,i){var n=i(57437),a=i(13856),l=i(28104);t.Z=e=>(0,n.jsxs)(a.J,{height:"calc(".concat(l.cM," * 1.125)"),width:"calc(".concat(l.cM," * 1.5)"),viewBox:"0 0 18 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.88243 20.3683C3.94737 20.3683 2.37407 18.76 2.37407 16.782C2.37407 14.8039 3.94737 13.1956 5.88243 13.1956H12.1195C15.3441 13.1956 17.9668 10.5147 17.9668 7.21842C17.9668 3.92219 15.3441 1.24121 12.1195 1.24121H9.00098C8.35544 1.24121 7.83152 1.77677 7.83152 2.43665C7.83152 3.09654 8.35544 3.6321 9.00098 3.6321H12.1195C14.0546 3.6321 15.6279 5.24036 15.6279 7.21842C15.6279 9.19648 14.0546 10.8048 12.1195 10.8048H5.88243C2.65785 10.8048 0.0351562 13.4857 0.0351562 16.782C0.0351562 20.0782 2.65785 22.7592 5.88243 22.7592H9.00098C9.64652 22.7592 10.1704 22.2236 10.1704 21.5637C10.1704 20.9039 9.64652 20.3683 9.00098 20.3683H5.88243Z",fill:"white"}),(0,n.jsx)("path",{d:"M13.7117 19.0852H13.696C12.5066 19.0852 11.5368 20.0354 11.5368 21.2222C11.5368 22.4167 12.5302 23.3592 13.7117 23.3592C14.897 23.3592 15.8787 22.4129 15.8787 21.2222C15.8787 20.0315 14.897 19.0852 13.7117 19.0852ZM4.30146 0.641211H4.28578C3.09644 0.641211 2.12656 1.59141 2.12656 2.77821C2.12656 3.97276 3.12002 4.91521 4.30146 4.91521C5.48684 4.91521 6.46852 3.9689 6.46852 2.77821C6.46852 1.58751 5.48684 0.641211 4.30146 0.641211Z",stroke:"white",strokeWidth:"1.2"})]})},34097:function(e,t,i){var n=i(57437),a=i(13856);t.Z=e=>(0,n.jsxs)(a.J,{width:3.5,height:3.5,viewBox:"0 0 14 14",stroke:"currentColor",fill:"currentColor",...e,children:[(0,n.jsx)("path",{d:"M0.5 13.5L13.5 0.5"}),(0,n.jsx)("path",{d:"M0.5 7.5L7.5 0.5"}),(0,n.jsx)("path",{d:"M0.5 1.5L1.5 0.5"}),(0,n.jsx)("path",{d:"M6.5 13.5L13.5 6.5"}),(0,n.jsx)("path",{d:"M12.5 13.5L13.5 12.5"})]})},72249:function(e,t,i){i.d(t,{q:function(){return a}});var n=i(92978);let a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.map(e=>({id:e.id,url:e.imageUrl,generated_image_variation_generics:e.generated_image_variation_generics.map(e=>({__typename:"generated_image_variation_generic",...e})),generation:{...e.generation,motion:!!e.motionMp4Url,user:{__typename:"users",id:e.user.id,username:e.user.username}},nsfw:e.nsfw,generated_image_moderation:e.generated_image_moderation}));return(0,n.T)(i,t)}},97923:function(e,t,i){i.d(t,{ob:function(){return m}});var n=i(12199),a=i(63251),l=i(99376),r=i(39954),o=i(65898),s=i(23713),c=i(63075),d=i(54944);let u=(e,t)=>{t.forEach(t=>{let i="generated_images:".concat(t);e.cache.evict({id:i})||console.warn("Error removing image with id '".concat(i,"' from apollo cache"))})},g=(e,t,i)=>{t.forEach(t=>{let n=e.identify({id:t,__typename:"generated_images"});if(!n){console.error("Could not generate cache ID for generated_images.id ".concat(t));return}e.modify({id:n,fields:{public:()=>i}})})},m=()=>{let[e,{loading:t}]=(0,n.D)(d.LP$),i=(0,o.Z)(),{userSelectedTeam:m}=(0,r.P)(),{setSelectedImages:h,selectedImages:p}=(0,s.V)(),f=m(),b=(0,a.x)(),x=!!f.id,v=(0,l.usePathname)(),w=null==v?void 0:v.startsWith(c.l.TEAM_FEED);return{updateImagePrivacy:async function(t,n){let a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];try{var l,r;let{data:s}=await e({variables:{generatedImageIds:t,public:n},update(e,i){let{data:a}=i;if(!(null==a?void 0:a.updateGeneratedImagesPublic)){console.error("Could not update cache for generated_images after updateGeneratedImagesPublic due to data.updateGeneratedImagesPublic being undefined");return}g(e,t,n)}});if(!(null==s?void 0:null===(l=s.updateGeneratedImagesPublic)||void 0===l?void 0:l.affectedRows))return!1;let c=null==s?void 0:null===(r=s.updateGeneratedImagesPublic)||void 0===r?void 0:r.affectedRows,d=1===c?"The selected image has been made ".concat(n?"public":"private"," in the team feed."):"".concat(c," selected images have been made ").concat(n?"public":"private"," in the feed."),m=1===c?"The selected image has been made ".concat(n?"public":"private"," in the feed."):"".concat(c," selected images have been made ").concat(n?"public":"private"," in the feed.");x&&!n&&(a&&u(b,t),w&&h(p.filter(e=>!t.includes(e.id)))),i({description:x?d:m,position:"bottom-right",type:o.N.info})}catch(e){return console.error("failed to update image privacy",e),i({title:"Error",description:"There was an error updating the privacy of the selected images.",type:o.N.error,position:"bottom-right"}),!1}return!0},loading:t}}},62257:function(e,t,i){i.d(t,{k3:function(){return n}});let n=()=>{window.scrollTo({top:0,behavior:"smooth"})}}}]);