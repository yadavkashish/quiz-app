!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},i=Error().stack;i&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[i]="b7589c32-7c9a-486e-b75a-fae98f13d418",e._sentryDebugIdIdentifier="sentry-dbid-b7589c32-7c9a-486e-b75a-fae98f13d418")}catch(e){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2689],{11113:function(e,i,t){var r=t(57437),n=t(70996),a=t(28104);i.Z=e=>{let{children:i,background:t,...l}=e;return(0,r.jsx)(n.xu,{sx:{boxSizing:"border-box",borderRadius:"calc(".concat(a.cM," * 0.5)"),border:"calc(".concat(a.zV," * 0.3125) solid transparent"),backgroundClip:"padding-box",boxShadow:"0px 0px calc(".concat(a.cM," * 0.9375) rgba(143, 0, 255, 0)"),background:"linear-gradient(".concat(t,", ").concat(t,"), linear-gradient(81.02deg, #FA5560 -23.47%, #B14BF4 45.52%, #4D91FF 114.8%)"),backgroundOrigin:"padding-box, border-box",backgroundRepeat:"no-repeat",position:"relative","&:before":{borderRadius:"calc(".concat(a.cM," * 0.5)"),content:'""',position:"absolute",top:"calc(-".concat(a.zV," * 0.1875)"),right:"calc(-".concat(a.zV," * 0.1875)"),bottom:"calc(-".concat(a.zV," * 0.1875)"),left:"calc(-".concat(a.zV," * 0.1875)"),margin:"calc(-".concat(a.zV," * 0.0625)"),border:"calc(".concat(a.zV," * 0.3125) solid ").concat(t,"}")}},...l,children:i})}},22573:function(e,i,t){t.d(i,{S:function(){return iS}});var r=t(57437),n=t(8196),a=t(49911),l=t(21788),o=t(55294),s=t(75500),d=t(77473),c=t(70185),u=t(49270),g=t(27924),h=t(58055),m=t(4360),p=t(3137),x=t(16654),f=t(13449),b=t(50017),v=t(52710),y=t(2265),C=t(17292),j=t(16152),I=t(37354),S=t(95171),w=t(70996),k=t(41360),_=t(57806),E=t(47488),T=t(35992),U=t(29501),H=t(77763),A=t(20517),L=t(3524),R=t(1677),P=t(48946),D=t(4407),M=t(74449),N=t(21457),O=t(50571),V=t(3676),z=t(4134);let W=e=>{let{isExistingUpscale:i,isUpscalePending:t,isSubmitting:n,isDisabled:a,isLoading:l,onClose:o,register:s}=e,d=(0,M.T)(),c=e=>{d((0,z.BR)(e))},{isUserFreePlan:u}=(0,N.usePlan)();return(0,r.jsxs)(A.m,{gap:3,flexDirection:"column",borderColor:"border.nobleBlack",borderTopWidth:"px",children:[!u&&(0,r.jsx)(r.Fragment,{children:i?(0,r.jsxs)(f.k,{gridColumn:"1/-1",fontSize:"sm",mb:1,alignItems:"center",flex:"1 1 100%",children:[(0,r.jsx)(P.Z,{mr:2,height:5,width:5}),t?"A refiner variant for these settings is currently generating.":"You've already created a refiner variant with these settings."]}):(0,r.jsx)(f.k,{gridColumn:"1/-1",alignItems:"center",flex:"1 1 100%",children:(0,r.jsx)(L.X,{variant:"alternative",isDisabled:n,...s("closeOnUpscale",{onChange:e=>c(e.target.checked)}),children:(0,r.jsx)(m.x,{fontSize:"sm",children:"Close this modal after commencing upscale"})})})}),(0,r.jsxs)(f.k,{w:"full",gap:4,children:[(0,r.jsx)(R.z,{onClick:o,flex:1,variant:"outline",background:"background.darkblue",borderColor:"border.greyBlue",children:"Cancel"}),(0,r.jsx)(R.z,{"data-tracking-id":V.LJA,isLoading:l,isDisabled:a,type:"submit",variant:"gradient",flex:1,rightIcon:(0,r.jsxs)(f.k,{alignItems:"center",children:[(0,r.jsx)(D.Z,{fill:"white"}),(0,r.jsx)(m.x,{fontSize:"sm",children:O.Ye.UPSCALE_ALCHEMY})]}),children:"Upscale"})]})]})};var Z=t(68499),B=t(85330),F=t(30166),Y=t(11113),G=t(298),q=t(67447);let K=(0,F.default)(()=>Promise.all([t.e(3121),t.e(3809),t.e(1128),t.e(2653),t.e(2999),t.e(9694)]).then(t.bind(t,12630)).then(e=>e.default),{loadableGenerated:{webpack:()=>[12630]}}),J=()=>{let{isOpen:e,onClose:i,onOpen:t}=(0,Z.q)();return(0,r.jsxs)(Y.Z,{rounded:"lg",width:"full",py:3,px:2.5,background:"#090D14",children:[(0,r.jsxs)(f.k,{justifyContent:"space-between",alignContent:"center",children:[(0,r.jsxs)(f.k,{gap:2,children:[(0,r.jsx)(f.k,{width:"2.1875rem",height:"2.1875rem",padding:"0.27344rem",justifyContent:"center",alignItems:"center",bg:"gradient.main",borderRadius:"0.75rem",children:(0,r.jsx)(G.Z,{width:"1.64063rem",height:"1.64063rem",m:"0.05rem"})}),(0,r.jsxs)(w.xu,{children:[(0,r.jsx)(m.x,{fontSize:"sm",color:"text.white",fontWeight:500,lineHeight:5,children:"Upgrade to Alchemy Upscaler"}),(0,r.jsx)(m.x,{fontSize:"xs",color:"text.white",fontWeight:500,lineHeight:4,children:"Upgrade to a premium plan to upscale your images with the Alchemy pipeline"})]})]}),(0,r.jsx)(q.s,{dataTrackingId:V.Xxs,onClick:t,size:"md",py:1.5,px:2,variant:"gradient",children:"Upgrade Now"})]}),(0,r.jsx)(B.h,{children:e&&(0,r.jsx)(K,{isOpen:e,onClose:i})})]})};var Q=t(53686);let X=e=>({strength:(0,Q.dU)(e.sdVersion)&&e.alchemy?T.ALCHEMY_REFINER_STRENGTH_ALCHEMY_SDXL_DEFAULT:T.ALCHEMY_REFINER_STRENGTH_DEFAULT,creative:!1,closeOnUpscale:(0,M.C)(e=>e.view.alchemyRefinerCloseOnUpscale),shouldHideModalOnSubmit:!1});var $=t(93340),ee=t(91850);let ei=e=>e.filter(e=>{var i;return(null===(i=e.upscale_details[0])||void 0===i?void 0:i.oneClicktype)===$.VARIATION_ONECLICK_TYPE.ALCHEMY_REFINER}).sort(ee.kL).map(e=>(0,ee.rJ)(e)),et=(e,i)=>{let{strength:t,creative:r}=i,n=e.find(e=>{let[i]=e.upscale_details;if(i)return i.oneClicktype===$.VARIATION_ONECLICK_TYPE.ALCHEMY_REFINER&&i.alchemyRefinerStrength===t&&i.alchemyRefinerCreative===r}),a=(null==n?void 0:n.status)===O.v6.PENDING;return{isExistingUpscale:!!n,isUpscalePending:a}};var er=t(54944),en=t(48503),ea=t(64855),el=t(69145),eo=t(43434);let es=e=>{let{imageId:i,isImageSaving:t,onGetImageId:n,generation:a,variations:l,refetchVariations:o,refetchingVariations:s,onClose:d}=e,{handleAlchemyRefiner:c}=(0,en.o)(i,i,{fallbackData:l}),u=X(a),g=(0,U.cI)({defaultValues:u}),{handleSubmit:h,register:p,formState:{isSubmitting:x},watch:b}=g,[v,y]=b(["strength","creative"]),C=ei(l||[]),A=!!C.length,{isExistingUpscale:L,isUpscalePending:R}=et(l||[],{strength:v,creative:y}),P=async e=>{let{strength:i,creative:t,closeOnUpscale:r}=e,a=await n();if(a){if(await c(i,t,a,[{query:er.Hnq,variables:{id:a}}]),r)return d();o({generationImageId:a})}},{isUserProPlan:D,isUserFreePlan:M}=(0,N.usePlan)(),V=(0,el.B)(O.Ye.UPSCALE_ALCHEMY),{isDisabledAlchemyRefiner:z}=(0,ea.u)(l),Z=L||(z||!V)&&!D||s||M||t,B=x||R||s||t;return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(U.RV,{...g,children:(0,r.jsxs)("form",{onSubmit:h(P),children:[(0,r.jsx)(j.f,{background:eo.HW.DARK_BLUE_TWO,p:5,height:"30rem",children:(0,r.jsxs)(f.k,{flexDirection:"column",gap:6,children:[M&&(0,r.jsx)(J,{}),(0,r.jsx)(I.Z,{background:"gradient.background",borderWidth:"px",borderStyle:"solid",borderColor:"border.greyBlue",borderRadius:"lg",opacity:M?.5:1,cursor:M?"not-allowed":"auto",userSelect:M?"none":"auto",children:(0,r.jsxs)(S.NI,{variant:"group",background:"none",pointerEvents:M?"none":"auto",children:[(0,r.jsxs)(w.xu,{children:[(0,r.jsx)(m.x,{fontSize:"lg",fontWeight:700,lineHeight:5,children:"Refiner Strength"}),(0,r.jsx)(m.x,{py:1,color:"secondary.inactive",fontSize:"xs",fontWeight:400,lineHeight:4,children:"Setting the strength to “high” allows for less refinement flexibility. For greater creative freedom, set it to “low”."})]}),(0,r.jsxs)(k.P,{width:"auto",isDisabled:x||M,icon:(0,r.jsx)(H.gwH,{}),...p("strength",{valueAsNumber:!0}),children:[(0,r.jsx)("option",{value:T.ALCHEMY_REFINER_STRENGTH.High,children:"High"}),(0,r.jsx)("option",{value:T.ALCHEMY_REFINER_STRENGTH.Medium,children:"Medium"}),(0,r.jsx)("option",{value:T.ALCHEMY_REFINER_STRENGTH.Low,children:"Low"})]})," "]})}),(0,r.jsx)(I.Z,{background:"gradient.background",borderWidth:"px",borderStyle:"solid",borderColor:"border.greyBlue",borderRadius:"lg",opacity:M?.5:1,cursor:M?"not-allowed":"auto",userSelect:M?"none":"auto",children:(0,r.jsxs)(S.NI,{variant:"group",background:"none",pointerEvents:M?"none":"auto",children:[(0,r.jsxs)(w.xu,{children:[(0,r.jsx)(m.x,{fontSize:"lg",fontWeight:700,lineHeight:5,children:"Smooth Mode"}),(0,r.jsx)(m.x,{py:1,color:"secondary.inactive",fontSize:"xs",fontWeight:400,lineHeight:4,children:"Smooth mode enhances image coherence but may reduce fine details. Turn it ON for a more refined image appearance, airbrushed styles, vector images, and to tame chaotic visuals"})]}),(0,r.jsx)(_.r,{variant:"blueish",isDisabled:x||M,...p("creative")})]})}),A&&(0,r.jsx)(I.Z,{background:"gradient.background",borderWidth:"px",borderStyle:"solid",borderColor:"border.greyBlue",borderRadius:"lg",children:(0,r.jsxs)(w.xu,{p:3,children:[(0,r.jsx)(m.x,{fontSize:"lg",fontWeight:700,lineHeight:5,children:"Existing Refined Versions"}),(0,r.jsx)(E.aV,{listStyleType:"disc",ml:4,py:1,children:C.map(e=>(0,r.jsx)(E.HC,{color:"secondary.inactive",fontSize:"sm",children:e},e))})]})})]})}),(0,r.jsx)(W,{isExistingUpscale:L,isUpscalePending:R,isSubmitting:x,isDisabled:Z,isLoading:B,onClose:d,register:p})]})})})};var ed=t(12199),ec=t(77828),eu=t(20765),eg=t(86827),eh=t(76405),em=t(30857),ep=t(70927),ex=t(91727),ef=t(65814),eb=t(14784),ev=t(98052),ey=t(74059);let eC=e=>{let{value:i,onChange:t,defaultValue:n=5,min:a,max:l,step:o}=e;return(0,r.jsxs)(ev.iR,{width:"100%",flex:1,min:a,max:l,step:o,value:i,onChange:t,zIndex:0,children:[n&&(0,r.jsx)(ev.jz,{fontSize:"sm",value:n,marginLeft:"-1.5",children:(0,r.jsx)(ey.Z,{color:"#2F2F2F"})}),(0,r.jsx)(ev.Uj,{height:"100%",rounded:"full",children:(0,r.jsx)(ev.Ms,{})}),(0,r.jsx)(ev.gs,{})]})};var ej=t(25730),eI=t(82305),eS=t(25230),ew=t(29360),ek=t(61576),e_=t(16814),eE=t(96840),eT=t(41886),eU=t(21481),eH=t(91325),eA=t(24914),eL=t(36787);let eR=e=>{let{onAddNewImage:i,isDisabled:t,isDraggingFile:n,isUploading:a,setIsUploading:l}=e,[o,s]=(0,y.useState)(!1),[d,c]=(0,y.useState)(0),u=(0,eT.Z)(e=>{e.state===eT.P.REQUESTING_INIT_IMAGE?a||l(!0):e.state===eT.P.UPLOADING?c(e.uploadPercent):e.state===eT.P.ERROR?(l(!1),c(0)):e.state===eT.P.FINISHED&&(l(!1),i({initImageType:er.esw.Uploaded,initImageId:e.initImageId,alt:e.name,dimensions:e.dimensions,base64ImageUri:e.dataUrl}))}),g=async e=>{try{if(0===e.length)throw Error("no files provided to upload handler");await u(e[0])}catch(e){s(!0)}};return(0,r.jsx)(eL.Z,{disabled:t,onDrop:g,openDialogOnClick:!1,flex:1,w:"full",h:"full",children:e=>{let{isDragReject:i}=e;return(0,r.jsxs)(eI.J,{isOpen:i||o,children:[(0,r.jsx)(eS.x,{children:(0,r.jsx)(R.z,{isDisabled:a,variant:"outline",display:"flex",justifyContent:"center",alignItems:"center",flexDir:"column",flex:1,gap:2.5,width:"full",height:"full",px:2,py:4,border:"transparent",rounded:"none",cursor:"pointer",background:n?"transparent":"background.darkblue",transition:"all 0.2s ease-in-out",_hover:{background:n?"transparent":"background.greyblue"},children:a?(0,r.jsxs)(f.k,{position:"relative",justifyContent:"center",alignItems:"center",width:10,height:10,children:[d<100&&(0,r.jsx)(m.x,{fontSize:"0.5rem",fontWeight:700,children:d.toString()+"%"}),(0,r.jsx)(eU.Z,{position:"absolute",top:0,w:10,h:10})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(ew.K,{display:n?"block":"none",align:"center",children:[(0,r.jsx)(eH.Z,{w:10,h:10,mt:6,mb:2,filter:"drop-shadow(0.125rem 0.125rem 0.75rem black)"}),(0,r.jsx)(m.x,{fontSize:"lg",fontWeight:600,textShadow:"0.125rem 0.125rem 0.75rem black",children:"Drop an Image Here"}),(0,r.jsx)(m.x,{fontSize:"md",textShadow:"0.0625rem 0.0625rem 0.375rem black",children:"PNG, JPG or WEBP up to 5MB"})]}),(0,r.jsxs)(ew.K,{display:n?"none":"block",align:"center",children:[(0,r.jsx)(eH.Z,{w:10,h:10,mb:1}),(0,r.jsxs)(m.x,{fontSize:"sm",children:["Add"," ",(0,r.jsx)(m.x,{as:"span",fontWeight:600,children:"Image"})]})]})]})})}),(0,r.jsxs)(ek.y,{background:"alert",children:[(0,r.jsx)(e_.Q,{bg:"alert"}),(0,r.jsx)(eE.b,{alignItems:"center",children:(0,r.jsxs)(f.k,{alignItems:"center",gap:2,children:[(0,r.jsx)(eA.Z,{width:5,height:5,color:"white"}),(0,r.jsx)(m.x,{children:o?"Error uploading image":"Unsupported file type or size"})]})})]})]})}})};var eP=t(46598),eD=t(81244),eM=t(29410),eN=t(28609),eO=t(1532),eV=t(75442),ez=t(19667),eW=t(39954);let eZ=e=>{var i,t,n;let{imageInput:a,onImageClear:l,onImageSelect:o,megaPixels:s,isClearImageDisabled:d}=e,c=(0,eV.Z)(a,O.G3),{isDraggingFile:u}=(0,ez.Z)(),[g,h]=(0,y.useState)(!1),{isOpen:m,onClose:p,onOpen:x}=(0,Z.q)(),{userSelectedTeam:b}=(0,eW.P)(),{id:v,akUUID:C}=b(),j=null!==(n=null==a?void 0:a.base64ImageUri)&&void 0!==n?n:c,I=(null==a?void 0:null===(i=a.dimensions)||void 0===i?void 0:i.width)||0,S=(null==a?void 0:null===(t=a.dimensions)||void 0===t?void 0:t.height)||0,k=I&&S?"".concat(I," / ").concat(S):"2 / 1",_=null!=a&&!!a.dimensions&&(0,eD.w)({imageWidth:I,imageHeight:S});return(0,r.jsxs)(f.k,{w:"full",minHeight:"9.75rem",rounded:"lg",position:"relative",justifyContent:"center",alignItems:"center",overflow:"hidden",cursor:j?"default":"pointer",onClick:j?void 0:x,borderWidth:u?"0.125rem":"0.063rem",borderStyle:u?"dashed":"solid",borderColor:u?"black":"border.greyBlue",background:u?"linear-gradient(135deg, #B14BF4 60%, #4D91FF) border-box":"background.darkblue",transition:"background 0.2s ease-in-out",_hover:{background:"background.greyblue",borderWidth:"px",borderStyle:"solid",borderColor:"border.greyBlue"},children:[j?(0,r.jsx)(eu.u,{hasArrow:!0,arrowSize:6,placement:"auto",fontSize:"xs",isDisabled:_,children:(0,r.jsxs)(eg.M,{position:"relative",width:"100%",minHeight:32,maxHeight:"28rem",style:{aspectRatio:k},children:[(0,r.jsx)(eO.Z,{loadingComponent:(0,r.jsx)(eM.Z,{}),fill:!0,src:j,alt:"Source image",style:{filter:u?"blur(0.3125rem)":void 0,objectFit:"cover",objectPosition:"center",transition:"all 0.35s ease-in-out"}},j),(0,r.jsx)(eu.u,{label:"Clear Source Image",placement:"auto",gutter:10,hasArrow:!0,fontSize:"xs",children:(0,r.jsx)(ej.h,{onClick:l,"aria-label":"Clear Source Image",icon:(0,r.jsx)(eN.Z,{w:6,h:6}),variant:"outline",position:"absolute",top:2,right:2,border:"none",rounded:"full",isDisabled:d})}),(0,r.jsx)(w.xu,{display:u||g?"block":"none",w:"full",h:"full",background:"background.darkblue",children:(0,r.jsx)(eR,{onAddNewImage:o,isDraggingFile:u,isUploading:g,setIsUploading:h})})]})}):(0,r.jsx)(w.xu,{w:"full",h:"full",background:"background.darkblue",children:(0,r.jsx)(eR,{onAddNewImage:e=>{o(e),p()},isDraggingFile:u,isUploading:g,setIsUploading:h})}),(0,r.jsx)(eP.Z,{isOpen:m,onClose:p,onSelect:o,teamId:v,teamAkUuid:C})]})};var eB=t(98230),eF=t(61375),eY=t(54658),eG=t(79425);let eq=e=>{let{value:i,onChange:t,styleOptions:n,loading:a}=e;return(0,r.jsx)(eB.L,{h:8,py:0,borderColor:"old.greyblue",borderStyle:"solid",borderWidth:1,minHeight:12,flex:0,iconClosed:(0,r.jsx)(eY.Z,{color:"white"}),iconOpened:(0,r.jsx)(eY.Z,{color:"white",transform:"rotate(180deg)"}),label:(0,r.jsxs)(f.k,{whiteSpace:"nowrap",align:"center",gap:3,children:[(0,r.jsx)(eG.Z,{width:4,height:4}),(0,r.jsxs)(f.k,{flexDirection:"column",alignItems:"start",p:0,gap:0,children:[(0,r.jsx)(m.x,{fontSize:"xs",color:"grey",textAlign:"left",lineHeight:1,children:"Upscaler Style"}),i]})]}),zIndex:100,isLoading:a,isDisabled:!(null==n?void 0:n.length),type:"button",bg:"background.darkblue",children:null==n?void 0:n.map(e=>(0,r.jsx)(eF.h,{value:e,onClick:()=>t(e),type:"button",children:e},e))})};var eK=t(86333),eJ=t(77951),eQ=t(72760),eX=t(46402),e$=t(74015),e0=t(59104),e1=t(69557);let e5=e=>{let{type:i,metadata:t,width:n,height:a}=e;return(0,r.jsxs)(f.k,{justifyContent:"space-between",w:"full",fontSize:"sm",children:[(0,r.jsxs)(m.x,{children:[i,"\xa0",t]}),n&&a&&(0,r.jsxs)(m.x,{color:"secondary.inactive",children:[n,"\xd7",a]})]})},e2=e=>{var i,t;let{variations:n=[],onChange:a,onSelectOriginal:l,value:o,originalWidth:s,originalHeight:d,isLoading:c}=e,u=n.filter(e=>!!(null==e?void 0:e.upscale_details)&&(null==e?void 0:e.upscale_details.length)>0),g=u.find(e=>e.id===o);return(0,r.jsxs)(eK.v,{gutter:0,matchWidth:!0,preventOverflow:!0,children:[(0,r.jsx)(eJ.j,{w:"full",borderWidth:"px",borderColor:"border.greyBlue",rounded:"md",fontSize:"md",bg:"darkblue",_hover:{bg:"background.darkblue"},_active:{borderWidth:"px",borderColor:"transparent",bg:"background.darkblue"},type:"button",py:2,px:1,children:(0,r.jsxs)(f.k,{justifyContent:"space-between",alignItems:"center",px:4,children:[(0,r.jsx)(f.k,{justifyContent:"space-between",flex:1,children:(0,r.jsx)(m.x,{fontWeight:300,pr:1,w:"full",children:g?(0,r.jsx)(e5,{type:(0,ee.Pw)(g.upscale_details[0].oneClicktype),metadata:g.upscale_details[0].optional_metadata,width:null!==(i=g.image_width)&&void 0!==i?i:g.upscale_details[0].width,height:null!==(t=g.image_height)&&void 0!==t?t:g.upscale_details[0].height}):(0,r.jsx)(e5,{type:"Original Image",width:s,height:d})})}),(0,r.jsx)(e0.Z,{}),c&&(0,r.jsx)(eQ.$,{w:3,h:3,ml:1})]})}),(0,r.jsxs)(eX.q,{maxH:"lg",py:2,px:1,borderWidth:"px",borderColor:"border.grey",rounded:"lg",overflowY:"auto",children:[(0,r.jsx)(e$.s,{onClick:l,children:(0,r.jsx)(e5,{type:"Original Image",width:s,height:d})}),u.map(e=>{var i,t;return(0,r.jsx)(e$.s,{onClick:()=>a(e),type:"button",isDisabled:!(e.status===e1.j.COMPLETE&&(e.upscale_details.every(e=>e.width&&e.height)||e.image_width&&e.image_height)),children:(0,r.jsx)(e5,{type:(0,ee.Pw)(e.upscale_details[0].oneClicktype),metadata:e.upscale_details[0].optional_metadata,width:null!==(i=e.image_width)&&void 0!==i?i:e.upscale_details[0].width,height:null!==(t=e.image_height)&&void 0!==t?t:e.upscale_details[0].height})},e.id)})]})]})};var e3=t(68686),e4=t(27648),e6=t(63075),e7=t(65898);let e9={type:e7.N.info,title:(0,r.jsxs)(m.x,{children:["Upscaling started. Check the"," ",(0,r.jsx)(e3.r,{as:e4.default,href:e6.l.UNIVERSAL_UPSCALER,children:"Universal Upscaler"})]})};e7.N.info,m.x,e3.r,e4.default,e6.l.LIBRARY;var e8=t(79770),ie=t(88430),ii=t(67667),it=t(75271),ir=t(17919),ia=t(69486),il=t(96019),io=t(51023),is=t(1866),id=t(82572),ic=t(68993),iu=t(74554),ig=t(75365),ih=t(45608);let im=e=>{let{text:i}=e;return(0,r.jsx)(eu.u,{shouldWrapChildren:!0,label:i,placement:"auto",fontSize:"xs",arrowSize:6,hasArrow:!0,children:(0,r.jsx)(eg.M,{children:(0,r.jsx)(ii.Z,{})})})},ip=e=>{var i,t,n,a,l,o,d,c;let{image:u,imageSource:g,onClose:p,variations:x,refetchVariations:b,onUpscale:v,startPollingVariations:C,stopPollingVariations:S,areVariationsLoading:k,onGetImageId:_}=e,{isUltraUpscaleQuickSettingsEnabled:E}=(0,io.V)(),T=(0,M.T)(),[H,P]=(0,y.useState)(u),[O,W]=(0,y.useState)(il.yp.High),[Z,B]=(0,y.useState)(u),F=(null==Z?void 0:null===(i=Z.dimensions)||void 0===i?void 0:i.width)||0,Y=(null==Z?void 0:null===(t=Z.dimensions)||void 0===t?void 0:t.height)||0,{userSelectedTeam:G}=(0,eW.P)(),q=G(),{isUserFreePlan:K}=(0,N.usePlan)(),J=(0,e7.Z)(),{handleGenError:Q}=(0,e8.c)(),X=(0,is.a)(),$=(0,M.C)(e=>e.view.alchemyRefinerCloseOnUpscale),[ee,{loading:ei}]=(0,ed.D)(er.TkA),et=il.zb,en=E?et.creativityStrength:5,ea=E?et.detailContrast:5,es=E?et.similarity:5,ev=(0,U.cI)({defaultValues:{creativityStrength:en,upscaleMultiplier:2,upscaleHeight:0,upscaleWidth:0,upscalerStyle:"Realistic",shouldHideModalOnSubmit:$,detailContrast:ea,similarity:es}}),{control:ey,handleSubmit:ej,watch:eI,setValue:eS,getValues:ew}=ev,{data:ek,loading:e_}=(0,s.a)(er.ReD,{variables:{arg1:{isUltra:!0}}}),eE=(null==ek?void 0:null===(n=ek.universalUpscalerStyles)||void 0===n?void 0:n.styles.filter(e=>null!==e))||[],eT=(null==Z?void 0:Z.userId)===X.id,eU=(null==Z?void 0:Z.initImageType)===er.esw.Generated;async function eH(e){let{creativityStrength:i,upscaleMultiplier:t,upscalerStyle:r,detailContrast:n,similarity:a}=e;if(Z)try{let e={creativityStrength:i,prompt:"",teamId:q.akUUID||void 0,ultraUpscaleStyle:r,upscaleMultiplier:t,detailContrast:n,similarity:a},l=H.initImageId;if(Z.initImageType===er.esw.Generated){if(Z.initVariationId)e.variationId=Z.initVariationId;else{let i=await _();i&&(l=i),e.generatedImageId=Z.initImageId||i}}else Z.initImageType===er.esw.Uploaded&&(e.initImageId=Z.initImageId);await ee({variables:{arg1:e},refetchQueries:[{query:er.Hnq,variables:{id:l}}]}),eU&&eT?(T((0,ig.G8)({imageId:l,imageVariationType:iu.TH.UPSCALE_DEFAULT})),b({generationImageId:l}),null==v||v()):J(e9),eI("shouldHideModalOnSubmit")&&p(),T((0,ih.hk)())}catch(i){console.error("Error upscaling image",i);let e={type:e7.N.error,title:"Error",description:"There was an error while trying to upscale the selected image. Please wait and try again shortly"};if((0,ic.b)(i)&&(0,ic.N)({error:i,onError:Q}))return;i instanceof ec.cA&&(e.description=i.message),J(e)}}let eA=Math.round(F*eI("upscaleMultiplier")),eL=Math.round(Y*eI("upscaleMultiplier")),eR=eA*eL/1e6,eP=!(0,ie.tv)(eR,K),eD=(0,id.d)({inputWidth:(null==Z?void 0:null===(a=Z.dimensions)||void 0===a?void 0:a.width)||0,inputHeight:(null==Z?void 0:null===(l=Z.dimensions)||void 0===l?void 0:l.height)||0,upscaleMultiplier:eI("upscaleMultiplier")}),eM=(0,el.B)(eD),eN=!!(Z&&eP&&eM),eO=e=>!e.length||e.every(e=>e.width&&e.height),eV=null==x||!x.length||x.every(e=>e.status===e1.j.COMPLETE&&(eO(e.upscale_details)||e.image_height&&e.image_width));(0,y.useEffect)(()=>{if(eV){S();return}C(3e3)},[C,S,eV,Z]);let ez=ei||g.isImageSaving,eB=()=>{let e=Object.entries(il.Lw).find(e=>{let[i,t]=e;return t.creativityStrength===ew("creativityStrength")&&t.detailContrast===ew("detailContrast")&&t.similarity===ew("similarity")}),i=e?e[0]:"";i!==O&&W(i)};return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(U.RV,{...ev,children:(0,r.jsxs)("form",{onSubmit:ej(eH),children:[(0,r.jsx)(j.f,{overflowY:"auto",overflowX:"hidden",height:"30rem",background:eo.HW.DARK_BLUE_TWO,p:5,layerStyle:"scrollbarSlim",sx:{scrollbarGutter:"stable"},children:(0,r.jsxs)(eh.M,{columns:{base:1,md:2},spacing:4,children:[(0,r.jsxs)(f.k,{flexDirection:"column",gap:2,position:"relative",children:[(0,r.jsx)(m.x,{fontWeight:600,children:"Source Image"}),Z&&(0,r.jsx)(e2,{variations:x,onChange:e=>{if(!e)return;let i={width:e.image_width||e.upscale_details[0].width||0,height:e.image_height||e.upscale_details[0].height||0};B(t=>t?{...t,initVariationId:e.id,dimensions:i}:null)},onSelectOriginal:()=>{B(e=>e?{...e,initVariationId:void 0,dimensions:H.dimensions}:null)},value:Z.initVariationId,originalWidth:(null===(o=H.dimensions)||void 0===o?void 0:o.width)||0,originalHeight:(null===(d=H.dimensions)||void 0===d?void 0:d.height)||0,isLoading:!eV||k,..."dataUrl"===g.imageType&&{originalHeight:g.imageHeight,originalWidth:g.imageWidth}}),"generated"===g.imageType&&(0,r.jsx)(eZ,{imageInput:Z,onImageClear:()=>B(null),onImageSelect:e=>{var i,t;B(e),P(e),b({generationImageId:e.initImageId}),eS("upscaleWidth",(null===(i=e.dimensions)||void 0===i?void 0:i.width)||0),eS("upscaleHeight",(null===(t=e.dimensions)||void 0===t?void 0:t.height)||0)},megaPixels:eR,isClearImageDisabled:!eV||k}),"dataUrl"===g.imageType&&(0,r.jsx)(w.xu,{rounded:"lg",overflow:"hidden",children:(0,r.jsx)(ir.E,{src:null!==(c=g.imageDataUrl)&&void 0!==c?c:"",alt:"",height:g.imageHeight,width:g.imageWidth,style:{objectFit:"cover"}})})]}),(0,r.jsxs)(f.k,{flexDirection:"column",gap:2,children:[(0,r.jsx)(m.x,{fontWeight:600,children:"Upscale Settings"}),(0,r.jsxs)(I.Z,{background:"gradient.background",borderWidth:"px",borderStyle:"solid",borderColor:"border.greyBlue",borderRadius:"lg",p:5,children:[(0,r.jsx)(w.xu,{mb:5,children:(0,r.jsx)(U.Qr,{name:"upscalerStyle",control:ey,render:e=>{let{field:i}=e;return(0,r.jsx)(eq,{...i,styleOptions:eE,loading:e_})}})}),(0,r.jsxs)(w.xu,{children:[(0,r.jsx)(m.x,{fontWeight:600,fontSize:"0.875rem",children:"Upscale Multiplier"}),(0,r.jsxs)(h.U,{alignItems:"center",mb:4,gap:4,children:[(0,r.jsx)(U.Qr,{name:"upscaleMultiplier",control:ey,render:e=>{let{field:i}=e;return(0,r.jsx)(eC,{...i,min:1,max:2,step:.1})}}),(0,r.jsx)(w.xu,{borderWidth:"px",borderStyle:"solid",borderColor:"border.greyBlue",borderRadius:"lg",px:4,py:2,fontSize:"sm",minW:16,textAlign:"center",children:eI("upscaleMultiplier")})]})]}),(0,r.jsxs)(f.k,{alignItems:"center",gap:2,fontSize:"sm",minW:20,textAlign:"center",children:[(0,r.jsxs)(f.k,{align:"center",gap:1.5,children:[(0,r.jsxs)(w.xu,{borderWidth:"px",borderStyle:"solid",borderColor:"border.greyBlue",borderRadius:"lg",p:2,children:["W ",eA," ",(0,r.jsx)(m.x,{as:"span",color:"secondary.inactive",children:"px"})]}),(0,r.jsx)(f.k,{justifyContent:"center",flex:1,children:(0,r.jsx)(it.Z,{})}),(0,r.jsxs)(w.xu,{borderWidth:"px",borderStyle:"solid",borderColor:"border.greyBlue",borderRadius:"lg",p:2,children:["H ",eL," ",(0,r.jsx)(m.x,{as:"span",color:"secondary.inactive",children:"px"})]})]}),(0,r.jsxs)(w.xu,{borderWidth:"px",borderStyle:"solid",borderColor:"border.greyBlue",borderRadius:"lg",p:2,minW:16,children:[Math.round(eR)," ",(0,r.jsx)(m.x,{as:"span",color:"secondary.inactive",children:"MP"})]})]}),E&&(0,r.jsxs)(f.k,{mt:5,flexDirection:"column",gap:2.5,children:[(0,r.jsxs)(f.k,{alignItems:"center",gap:2,children:[(0,r.jsx)(m.x,{fontWeight:600,fontSize:"0.875rem",children:"Upscale Strength"}),(0,r.jsx)(im,{text:"Balances creativity, detail contrast, and similarity. Adjust each manually in Advanced Settings."})]}),(0,r.jsx)(ia.s,{options:Object.keys(il.Lw),onChange:e=>{if(W(e),(0,il.T$)(e)){let i=il.Lw[e];eS("creativityStrength",i.creativityStrength),eS("detailContrast",i.detailContrast),eS("similarity",i.similarity)}},value:O})]}),(0,r.jsx)(em.U,{allowMultiple:!0,bg:"none",mt:5,sx:{"& .chakra-collapse":{overflow:"visible !important"}},children:(0,r.jsxs)(ep.Q,{borderWidth:0,_last:{borderWidth:0},children:[(0,r.jsx)(ex.K,{p:0,children:(0,r.jsx)(eg.M,{width:"full",children:(0,r.jsxs)(f.k,{gap:2,align:"center",children:[(0,r.jsx)(m.x,{fontWeight:600,fontSize:"xs",children:"Advanced Settings"}),(0,r.jsx)(ef.X,{})]})})}),(0,r.jsxs)(eb.H,{display:"flex",flexDirection:"column",gap:3,px:0,children:[(0,r.jsxs)(w.xu,{children:[(0,r.jsxs)(f.k,{alignItems:"center",gap:2,children:[(0,r.jsx)(m.x,{fontWeight:600,fontSize:"0.875rem",children:"Creativity Strength"}),(0,r.jsx)(im,{text:"Drag the slider to adjust and control the artistic intensity. Higher values yield more creativity, lower values keep closer to the source image."})]}),(0,r.jsxs)(h.U,{alignItems:"center",gap:3,children:[(0,r.jsx)(U.Qr,{name:"creativityStrength",control:ey,render:e=>{let{field:i}=e;return(0,r.jsx)(eC,{...i,min:1,max:10,step:1,defaultValue:en,onChange:e=>{i.onChange(e),eB()}})}}),(0,r.jsx)(w.xu,{borderWidth:"px",borderStyle:"solid",borderColor:"border.greyBlue",borderRadius:"lg",p:2.5,minW:"3.125rem",textAlign:"center",children:(0,r.jsxs)(m.x,{fontSize:"xs",children:[eI("creativityStrength")," "]})})]})]}),(0,r.jsxs)(w.xu,{children:[(0,r.jsxs)(f.k,{alignItems:"center",gap:2,children:[(0,r.jsx)(m.x,{fontWeight:600,fontSize:"0.875rem",children:"Details Contrast"}),(0,r.jsx)(im,{text:"Adjusts the level of detail in the image. Higher values emphasize finer details."})]}),(0,r.jsxs)(h.U,{alignItems:"center",gap:3,children:[(0,r.jsx)(U.Qr,{name:"detailContrast",control:ey,render:e=>{let{field:i}=e;return(0,r.jsx)(eC,{...i,min:1,max:10,step:1,defaultValue:ea,onChange:e=>{i.onChange(e),eB()}})}}),(0,r.jsx)(w.xu,{borderWidth:"px",borderStyle:"solid",borderColor:"border.greyBlue",borderRadius:"lg",p:2.5,minW:"3.125rem",textAlign:"center",children:(0,r.jsx)(m.x,{fontSize:"xs",children:eI("detailContrast")})})]})]}),(0,r.jsxs)(w.xu,{children:[(0,r.jsxs)(f.k,{alignItems:"center",gap:2,children:[(0,r.jsx)(m.x,{fontWeight:600,fontSize:"0.875rem",children:"Similarity"}),(0,r.jsx)(im,{text:"Control how closely the output matches the original image. Higher values result in greater similarity."})]}),(0,r.jsxs)(h.U,{alignItems:"center",gap:3,children:[(0,r.jsx)(U.Qr,{name:"similarity",control:ey,render:e=>{let{field:i}=e;return(0,r.jsx)(eC,{...i,min:1,max:10,step:1,defaultValue:es,onChange:e=>{i.onChange(e),eB()}})}}),(0,r.jsx)(w.xu,{borderWidth:"px",borderStyle:"solid",borderColor:"border.greyBlue",borderRadius:"lg",p:2.5,minW:"3.125rem",fontSize:"sm",textAlign:"center",children:(0,r.jsx)(m.x,{fontSize:"xs",children:eI("similarity")})})]})]})]})]})})]})]})]})}),(0,r.jsxs)(A.m,{flexDirection:"column",gap:3,borderTopWidth:"px",borderTopStyle:"solid",borderTopColor:"border.grey",children:[(0,r.jsx)(f.k,{justifyContent:"center",children:(0,r.jsx)(U.Qr,{name:"shouldHideModalOnSubmit",control:ey,render:e=>{let{field:i}=e;return(0,r.jsx)(L.X,{variant:"alternative",...i,value:i.value.toString(),isChecked:eI("shouldHideModalOnSubmit"),onChange:e=>{let t="true"!==e.target.value;i.onChange(e),T((0,z.BR)(t))},fontSize:"sm",children:(0,r.jsx)(m.x,{fontSize:"sm",children:"Close this modal after commencing upscale"})})}})}),(0,r.jsxs)(f.k,{w:"full",gap:4,children:[(0,r.jsx)(R.z,{onClick:p,flex:1,variant:"outline",background:"background.darkblue",borderColor:"border.greyBlue",children:"Cancel"}),(0,r.jsx)(eu.u,{hasArrow:!0,arrowSize:6,placement:"auto",fontSize:"xs",label:(0,ie.rZ)({hasImageInput:!!Z,upscaleMultiplierResult:{canUpscaleForMultiplier:eP,resultingMegapixels:eR},canAffordUpscale:eM,areMegapixelUpscalesLimited:K}),isDisabled:eN,children:(0,r.jsx)(R.z,{"data-tracking-id":V.EXu,type:"submit",variant:"gradient",isDisabled:!eN,flex:1,rightIcon:(0,r.jsxs)(f.k,{alignItems:"center",children:[(0,r.jsx)(D.Z,{fill:"white"}),(0,r.jsx)(m.x,{fontSize:"sm",children:eD})]}),isLoading:ez,children:"Upscale"})})]})]})]})})})};var ix=t(65355);let ib=e=>{let{imageId:i,isImageSaving:t,onGetImageId:n,generation:a,variations:l,refetchVariations:o,refetchingVariations:s,onClose:d}=e,[c,u]=(0,y.useState)("smooth"),g=(0,ix.o)(a||void 0),{handleUpscaleSmooth:h,handleUpscaleHd:p,upscaleSmoothLoading:x,upscaleHdLoading:b}=(0,en.o)(i,i,{fallbackData:l}),v=(0,M.T)(),C=(0,M.C)(e=>e.view.alchemyRefinerCloseOnUpscale),k=e=>{v((0,z.BR)(e))},{isDisabledUpscaleSmooth:_,isDisabledUpscaleHd:E}=(0,ea.u)(l),{hasHitLimitUpscaleSmooth:T,hasHitLimitUpscaleHd:U}=(0,ee.tB)(l||[]),H=_||x||!g||s||t,P=x||s||"smooth"===c&&t,N=T&&g,W=async()=>{u("smooth");let e=await n();if(e){if(await h(e,[{query:er.Hnq,variables:{id:e}}]),C)return d();o({generationImageId:e})}},Z=E||b||!g||s||t,B=b||s||"crisp"===c&&t,F=U&&g,Y=async()=>{u("crisp");let e=await n();if(e){if(await p(e,[{query:er.Hnq,variables:{id:e}}]),C)return d();o({generationImageId:e})}};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(j.f,{background:eo.HW.DARK_BLUE_TWO,p:5,height:"30rem",children:(0,r.jsxs)(f.k,{flexDirection:"column",gap:6,children:[(0,r.jsx)(I.Z,{background:"gradient.background",borderWidth:"px",borderStyle:"solid",borderColor:"border.greyBlue",borderRadius:"lg",children:(0,r.jsx)(S.NI,{variant:"group",background:"none",children:(0,r.jsxs)(f.k,{align:"center",width:"full",gap:2,children:[(0,r.jsxs)(w.xu,{flex:1,children:[(0,r.jsx)(m.x,{fontSize:"lg",fontWeight:700,lineHeight:5,children:"Smooth Upscale"}),(0,r.jsx)(m.x,{color:"secondary.inactive",fontSize:"xs",fontWeight:400,lineHeight:4,children:"An upscaler that works well with a focused subject, but can end up smoothing out fine detail."})]}),(0,r.jsx)(eu.u,{hasArrow:!0,arrowSize:6,placement:"auto",fontSize:"xs",label:g?T?"Smooth upscale has already been performed on this image.":"":"Smooth upscale is not compatible with this generation's settings.",children:(0,r.jsx)(R.z,{"data-tracking-id":V.RCM,px:2,py:1.5,isLoading:P,isDisabled:H,onClick:W,type:"submit",variant:"primary",maxW:"fit-content",rightIcon:N?void 0:(0,r.jsxs)(f.k,{alignItems:"center",children:[(0,r.jsx)(D.Z,{fill:"white"}),(0,r.jsx)(m.x,{fontSize:"sm",children:O.Ye.UPSCALE})]}),maxWidth:"6.25rem",children:N?"Completed":"Upscale"})})]})})}),(0,r.jsx)(I.Z,{background:"gradient.background",borderWidth:"px",borderStyle:"solid",borderColor:"border.greyBlue",borderRadius:"lg",children:(0,r.jsx)(S.NI,{variant:"group",background:"none",children:(0,r.jsxs)(f.k,{align:"center",width:"full",gap:2,children:[(0,r.jsxs)(w.xu,{flex:1,children:[(0,r.jsx)(m.x,{fontSize:"lg",fontWeight:700,lineHeight:5,children:"Crisp Upscale"}),(0,r.jsx)(m.x,{color:"secondary.inactive",fontSize:"xs",fontWeight:400,lineHeight:4,children:"A great balanced upscaler which retains a good amount of detail and crispness to the image."})]}),(0,r.jsx)(eu.u,{hasArrow:!0,arrowSize:6,placement:"auto",fontSize:"xs",label:g?U?"Crisp upscale has already been performed on this image.":"":"Crisp upscale is not compatible with this generation's settings.",children:(0,r.jsx)(R.z,{isLoading:B,"data-tracking-id":V._wo,isDisabled:Z,onClick:Y,px:2,py:1.5,type:"submit",variant:"primary",maxW:"fit-content",rightIcon:F?void 0:(0,r.jsxs)(f.k,{alignItems:"center",children:[(0,r.jsx)(D.Z,{fill:"white"}),(0,r.jsx)(m.x,{fontSize:"sm",children:O.Ye.UPSCALE})]}),maxWidth:"6.25rem",children:F?"Completed":"Upscale"})})]})})})]})}),(0,r.jsxs)(A.m,{gap:3,flexDirection:"column",borderColor:"border.nobleBlack",borderTopWidth:"px",children:[(0,r.jsx)(f.k,{gridColumn:"1/-1",alignItems:"center",flex:"1 1 100%",children:(0,r.jsx)(L.X,{variant:"alternative",isChecked:C,onChange:e=>k(e.target.checked),children:(0,r.jsx)(m.x,{fontSize:"sm",children:"Close this modal after commencing upscale"})})}),(0,r.jsx)(eg.M,{w:"full",children:(0,r.jsx)(R.z,{maxWidth:"50%",onClick:d,flex:1,variant:"outline",background:"background.darkblue",borderColor:"border.greyBlue",children:"Cancel"})})]})]})};var iv=t(99911),iy=t(98869),iC=t(46463),ij=t(44022);let iI=e=>{var i,t,n,a,l,j;let{imageSource:I,onClose:S,onUpscale:w}=e,[k,_]=(0,y.useState)(0),[E]=(0,y.useState)(I),T=(0,ij.H)(),U=I.imageId,H=(0,is.a)(),{data:A,complete:L}=(0,o.J)({fragment:er.Evd,fragmentName:"ImageUpscalerParts",from:{__typename:"generated_images",id:I.imageId}}),{data:R}=(0,s.a)(er.rD$,{...U&&{variables:{id:U}},errorPolicy:"all",skip:L||!U}),P="dataUrl"===E.imageType&&!(null==R?void 0:R.generated_images_by_pk),D=L?A:"dataUrl"!==E.imageType||(null==R?void 0:R.generated_images_by_pk)?null==R?void 0:R.generated_images_by_pk:{id:"",url:"",userId:"",image_width:0,image_height:0},M=P?{...E,isImageSaving:I.isImageSaving}:I,{data:N,refetch:O,loading:V,networkStatus:z,startPolling:W,stopPolling:Z}=(0,s.a)(er.Kbq,{...U&&{variables:{generationImageId:U,variationWhere:{status:{_neq:e1.j.FAILED}}}},fetchPolicy:"cache-and-network",notifyOnNetworkStatusChange:!0,skip:!U});if(!D)return null;let B={initImageId:D.id,initImageType:er.esw.Generated,url:D.url,alt:"Generated Image",..."generated"===I.imageType&&{userId:D.userId,dimensions:{width:D.image_width||(null===(i=D.generation)||void 0===i?void 0:i.imageWidth)||0,height:D.image_height||(null===(t=D.generation)||void 0===t?void 0:t.imageHeight)||0}},..."dataUrl"===I.imageType&&{userId:H.id,dimensions:{height:I.imageHeight||0,width:I.imageWidth||0}}},F=null==N?void 0:null===(n=N.generated_images_by_pk)||void 0===n?void 0:n.generated_image_variation_generics,Y={sdVersion:(null===(a=D.generation)||void 0===a?void 0:a.sdVersion)||I.sdVersion,alchemy:null===(l=D.generation)||void 0===l?void 0:l.alchemy},G=async()=>D.id?D.id:U||(I.onGetImageId?I.onGetImageId():void 0),q=null!==(j=D.id)&&void 0!==j?j:U;return(0,r.jsxs)(c.m,{variant:"page",index:k,onChange:_,children:[(0,r.jsxs)(u.x,{px:0,pb:0,children:[(0,r.jsx)(g.o,{}),(0,r.jsxs)(h.U,{px:5,children:[(0,r.jsx)(iy.Z,{height:7,width:7,mr:2.5}),(0,r.jsx)(m.x,{fontSize:"2xl",fontWeight:500,fontStyle:"normal",children:"Upscale Image"})]}),(0,r.jsxs)(p.t,{px:5,children:[(0,r.jsx)(x.O,{ml:0,children:(0,r.jsxs)(f.k,{gap:2,children:[(0,r.jsx)(m.x,{children:"Ultra"}),(0,r.jsx)(iC.T,{lifeCycle:"New"})]})}),(0,r.jsx)(x.O,{children:"Alchemy"}),(0,r.jsx)(x.O,{children:"Other"})]})]}),(0,r.jsx)(iv.M,{children:(0,r.jsxs)(b.n,{children:[(0,r.jsx)(v.x,{p:T?void 0:0,pt:0,children:T?(0,r.jsx)(ip,{image:B,imageSource:M,onGetImageId:G,variations:F,onClose:S,onUpscale:w,refetchVariations:O,areVariationsLoading:V,startPollingVariations:W,stopPollingVariations:Z}):(0,r.jsx)(C.E,{onClose:S})}),(0,r.jsx)(v.x,{pt:0,children:(0,r.jsx)(es,{imageId:q,isImageSaving:!!I.isImageSaving,onGetImageId:G,generation:Y,variations:F,onClose:S,refetchVariations:O,refetchingVariations:V&&z===d.Ie.refetch})}),(0,r.jsx)(v.x,{pt:0,children:(0,r.jsx)(ib,{imageId:q,isImageSaving:!!I.isImageSaving,onGetImageId:G,generation:Y,variations:F,refetchVariations:O,refetchingVariations:V&&z===d.Ie.refetch,onClose:S})})]})})]})},iS=e=>{let{isOpen:i,onClose:t,onUpscale:o,...s}=e,d="imageId"in s?{imageType:"generated",imageId:s.imageId}:{imageType:"dataUrl",imageDataUrl:s.imageDataUrl,imageHeight:s.imageHeight,imageWidth:s.imageWidth,isImageSaving:s.isImageSaving,onGetImageId:s.onGetImageId,sdVersion:s.sdVersion};return(0,r.jsxs)(n.u_,{variant:"gradientDialogStyle",isOpen:i,onClose:t,isCentered:!0,children:[(0,r.jsx)(a.Z,{}),(0,r.jsx)(l.h,{maxW:"45rem",children:(0,r.jsx)(iI,{imageSource:d,onClose:t,onUpscale:o})})]})}},32680:function(e,i,t){t.d(i,{$k:function(){return H},AT:function(){return I},EH:function(){return g},FB:function(){return f},Gq:function(){return T},H1:function(){return m},J4:function(){return S},JU:function(){return M},LF:function(){return b},MG:function(){return C},O2:function(){return L},PY:function(){return N},Sz:function(){return p},Tz:function(){return y},UK:function(){return k},XF:function(){return E},Y_:function(){return O},a1:function(){return u},f6:function(){return w},fl:function(){return D},he:function(){return n},i9:function(){return j},iF:function(){return _},ii:function(){return U},jG:function(){return P},jr:function(){return V},pV:function(){return v},rD:function(){return A},rf:function(){return h},yL:function(){return R},zJ:function(){return x}});var r,n,a=t(35992),l=t(51291),o=t(41920),s=t(42104),d=t(17174);let c=(0,s.CB)(),u=8,g=32,h=32,m={Low:{inputPixelCount:786432,upscaleMultiplier:1.25,legacyUpscaleMultiplier:1.75,isPremium:!1},Medium:{inputPixelCount:917504,upscaleMultiplier:1.75,legacyUpscaleMultiplier:1.75,isPremium:!1},High:{inputPixelCount:1048576,upscaleMultiplier:1.75,legacyUpscaleMultiplier:1.75,isPremium:!0}},p=2,x=1.5,f={Low:{inputPixelCount:802816,upscaleMultiplier:1.5,legacyUpscaleMultiplier:1.5,ultraMultiplier:2,isPremium:!1},Medium:{inputPixelCount:1048576,upscaleMultiplier:1.5,legacyUpscaleMultiplier:1.5,ultraMultiplier:2,isPremium:!1},High:{inputPixelCount:1244160,upscaleMultiplier:1.5,legacyUpscaleMultiplier:1.5,ultraMultiplier:2,isPremium:!0}},b=f,v=new Map([["3:1",{long:3,short:1}],["2.4:1",{long:2.39,short:1}],["2:1",{long:2,short:1}],["1.85:1",{long:1.85,short:1}],["16:9",{long:16,short:9}],["3:2",{long:3,short:2}],["4:3",{long:4,short:3}],["5:4",{long:5,short:4}],["6:5",{long:6,short:5}],["1:1",{long:1,short:1}],["4:5",{long:4,short:5}],["5:6",{long:5,short:6}],["3:4",{long:3,short:4}],["2:3",{long:2,short:3}],["9:16",{long:9,short:16}],["1:2",{long:1,short:2}],["1:3",{long:1,short:3}]]),y=new Map([["facebook",{label:"Facebook",ratioId:"16:9",category:"Socials",isPremium:!1}],["instagram",{label:"Instagram",ratioId:"4:5",category:"Socials",isPremium:!1}],["x",{label:"Twitter / X",ratioId:"4:3",category:"Socials",isPremium:!1}],["tiktok",{label:"TikTok",ratioId:"9:16",category:"Socials",isPremium:!1}],["desktop",{label:"Desktop",ratioId:"16:9",category:"Devices",isPremium:!1}],["mobile",{label:"Mobile",ratioId:"9:16",category:"Devices",isPremium:!1}],["tv",{label:"TV",ratioId:"2:1",category:"Devices",isPremium:!1}],["squareDevice",{label:"Square",ratioId:"1:1",category:"Devices",isPremium:!1}],["cinema",{label:"Cinema",ratioId:"1.85:1",category:"Film",isPremium:!1}],["wide",{label:"Wide",ratioId:"2.4:1",category:"Film",isPremium:!0}],["portrait",{label:"2:3",ratioId:"2:3",category:"Basic",isPremium:!1}],["square",{label:"1:1",ratioId:"1:1",category:"Basic",isPremium:!1}],["landscape",{label:"16:9",ratioId:"16:9",category:"Basic",isPremium:!1}]]),C=["Socials","Devices","Film"],j=200,I={weightDefault:0,weightMinimum:-2,weightMaximum:2,weightStep:.1};(r=n||(n={}))[r.Off=0]="Off",r[r.Auto=1]="Auto",r[r.On=2]="On";let S=new Map([["Low",{basic:2.5,lightning:1,phoenix:3}],["Medium",{basic:3.5,lightning:1.3,phoenix:3.5}],["High",{basic:4.5,lightning:1.8,phoenix:4}]]),w="Medium",k=4,_=8,E="372b997f-0041-4a79-8ae2-0e7d490c1ba5",T="cf548be8-5349-4eaf-a8bf-f82597ffed6b",U="111dc692-d470-4eec-b791-3475abac4c46",H=512,A=1920,L=8,R={alchemy:!1,aspectRatio:"1:1",customWidth:1024,customHeight:1024,isUsingCustomResolution:!1,namedAspectRatioKey:"square",contrast:w,imageSize:"High",modelId:c.modelId,modelVersion:null,negativePrompt:void 0,negativePromptOpen:!1,numberOfImages:k,photoReal:!1,photoRealVersion:a.PhotoRealVersion.V2,presetId:null,private:!1,prompt:"",promptEnhance:1,styleId:U,tiling:!1,transparency:!1,ultra:!1,elements:null,userElements:null,imageGuidanceInputs:null,fixedSeed:null,fixedSeedEnabled:!1,describeImageError:null,promptSource:void 0},P=new Map([[o.N8.StyleTransfer,{shortTitle:"Style",description:"References the aesthetics from an image to influence the output.",isPremium:!1}],[o.N8.FaceTransfer,{shortTitle:"Character",description:"Create a consistent character by providing a reference image.",isPremium:!0}],[o.N8.ContentTransfer,{shortTitle:"Content",description:"Uses the shape & structure of a reference image to influence the output.",isPremium:!0}],[d.N.Img2Img,{shortTitle:"Image to Image",description:"Creative reinterpretation of vibe or structure from a reference image.",isPremium:!1,excludeIfControlNetsEnabled:!0}]]),D={akUUID:d.N.Img2Img,id:1,name:"Image to Image",type:d.N.Img2Img,thumbnailURL:"https://cdn.leonardo.ai/image_guidance_thumbnails/img2img/pre-thumbnail.webp",thumbnailResultURL:"https://cdn.leonardo.ai/image_guidance_thumbnails/img2img/post-thumbnail.webp",displayDescription:"Creative reinterpretation of vibe or structure from a reference image.",isDisabled:!1,isIncompatible:!1,disabledReason:"",limit:(0,l.dB)(d.N.Img2Img)},M="image-generation-snapshot",N="image-generation-first-run",O="preference-private",V={guidanceType:"guidanceType",imageId:"imageId"}},99911:function(e,i,t){t.d(i,{M:function(){return d},g:function(){return s}});var r=t(57437),n=t(2265),a=t(26258),l=t(48503);let o=(0,n.createContext)({alchemyRefinerLoading:!1,upscaleDefaultLoading:!1,upscaleAltLoading:!1,upscaleHdLoading:!1,upscaleSmoothLoading:!1,upscaleLoading:!1,removeBgLoading:!1,unzoomLoading:!1,upscaleUltraLoading:!1,handleAlchemyRefiner:async()=>void 0,handleUpscaleDefault:async()=>void 0,handleRemoveBg:async()=>void 0,handleUnzoom:async()=>void 0,handleUpscaleAlt:async()=>void 0,handleUpscaleSmooth:async()=>void 0,handleUpscaleHd:async()=>void 0,handleReport:async()=>void 0,handleDelete:()=>void 0,openAlchemyRefinerModal:()=>void 0,startPollingImageVariations:()=>Promise.resolve()}),s=()=>(0,n.useContext)(o),d=e=>{let{children:i,onCompleteCallback:t=()=>{}}=e,{image:s,selectedImageVariation:d,openConfirmationModal:c}=(0,a.J)(),u=(0,l.o)(null==s?void 0:s.id,null==d?void 0:d.id,{fallbackData:null==s?void 0:s.generated_image_variation_generics,onComplete:e=>{c(e),(null==s?void 0:s.id)&&t(s.id)}}),g=(0,n.useMemo)(()=>u,[u]);return(0,r.jsx)(o.Provider,{value:g,children:i})}},95525:function(e,i,t){t.d(i,{q:function(){return g}});var r=t(57437),n=t(20765),a=t(25730),l=t(12757),o=t(55013),s=t(57919),d=t(31574),c=t(2265),u=t(65898);let g=e=>{let{isDisabled:i,textToCopy:t,tooltipLabel:g="Copy prompt to clipboard",tooltipProps:h,...m}=e,p=(0,u.Z)(),{isCopied:x,handleCopyPrompt:f}=function(e,i,t){let[r,n]=(0,c.useState)(!1),a=(0,c.useRef)(null),l=async(t,r)=>{t.stopPropagation(),s.n({category:"user.action",message:null!=e?e:"User triggered a copy action",level:"debug"});try{await navigator.clipboard.writeText(r),n(!0),a.current&&clearTimeout(a.current),a.current=setTimeout(()=>{n(!1),a.current=null},1200)}catch(e){n(!1),i&&i(e),d.Tb(e)}};return(0,c.useEffect)(()=>()=>{a.current&&clearTimeout(a.current)},[]),{isCopied:r,handleCopyPrompt:l}}("User is attempting to ".concat(g),()=>{p({type:u.N.error,title:"Failed to copy",description:"Please try again"})}),b=m.variant?{}:{position:"relative",w:8,h:8,fontSize:{base:"xs",md:"sm"},fontWeight:300,size:"sm",color:"white",p:1,_disabled:{opacity:"0.5",cursor:"not-allowed",_hover:{bg:"rgba(23, 23, 23, 1)"}}};return(0,r.jsx)(n.u,{hasArrow:!0,placement:"top",label:x?"Copied!":g,...h,children:(0,r.jsx)(a.h,{"aria-label":g,variant:m.variant||"ModalImageButtonsStyles",isDisabled:i,onClick:e=>f(e,t),...b,...m,children:x?(0,r.jsx)(l.Z,{boxSize:m.variant?4.5:4}):(0,r.jsx)(o.Z,{boxSize:m.variant?4.5:3.5})})})}},55013:function(e,i,t){var r=t(57437),n=t(13856);i.Z=e=>(0,r.jsx)(n.J,{width:4,height:4,viewBox:"0 0 14 14",fill:"currentColor",...e,children:(0,r.jsx)("path",{d:"M11.25 3.16764H5.41667C3.96533 3.16764 3.16667 3.96631 3.16667 5.41764V11.251C3.16667 12.7023 3.96533 13.501 5.41667 13.501H11.25C12.7013 13.501 13.5 12.7023 13.5 11.251V5.41764C13.5 3.96631 12.7013 3.16764 11.25 3.16764ZM12.5 11.251C12.5 12.139 12.138 12.501 11.25 12.501H5.41667C4.52867 12.501 4.16667 12.139 4.16667 11.251V5.41764C4.16667 4.52964 4.52867 4.16764 5.41667 4.16764H11.25C12.138 4.16764 12.5 4.52964 12.5 5.41764V11.251ZM1.5 2.74764V8.58765C1.5 9.38631 1.82206 9.58298 1.92806 9.64832C2.16406 9.79232 2.23726 10.1003 2.09326 10.3357C1.9986 10.4897 1.83468 10.5743 1.66602 10.5743C1.57735 10.5743 1.48661 10.5503 1.40527 10.501C0.804607 10.133 0.5 9.48965 0.5 8.58765V2.74764C0.5 1.31964 1.31941 0.500977 2.74674 0.500977H8.58659C9.70992 0.500977 10.2467 0.993624 10.5 1.40629C10.644 1.64162 10.57 1.94963 10.3346 2.09363C10.0986 2.23829 9.79197 2.16364 9.6473 1.9283C9.58263 1.8223 9.38526 1.50033 8.58659 1.50033H2.74674C1.86141 1.50099 1.5 1.86231 1.5 2.74764Z",fill:"currentColor"})})},38448:function(e,i,t){var r=t(57437),n=t(13856);i.Z=e=>(0,r.jsx)(n.J,{width:3.5,height:1,viewBox:"0 0 14 4",fill:"currentColor",...e,children:(0,r.jsx)("path",{d:"M1.67993 3.33334C0.943932 3.33334 0.343262 2.736 0.343262 2.00001C0.343262 1.26401 0.936592 0.666672 1.67326 0.666672H1.67993C2.41593 0.666672 3.01327 1.26401 3.01327 2.00001C3.01327 2.736 2.4166 3.33334 1.67993 3.33334ZM8.3466 2.00001C8.3466 1.26401 7.74927 0.666672 7.01327 0.666672H7.00659C6.27059 0.666672 5.6766 1.26401 5.6766 2.00001C5.6766 2.736 6.2766 3.33334 7.01327 3.33334C7.74993 3.33334 8.3466 2.736 8.3466 2.00001ZM13.6799 2.00001C13.6799 1.26401 13.0826 0.666672 12.3466 0.666672H12.3399C11.6039 0.666672 11.0099 1.26401 11.0099 2.00001C11.0099 2.736 11.6099 3.33334 12.3466 3.33334C13.0833 3.33334 13.6799 2.736 13.6799 2.00001Z"})})},79425:function(e,i,t){var r=t(57437),n=t(13856);i.Z=e=>(0,r.jsx)(n.J,{width:4,height:4,viewBox:"0 0 15 16",...e,children:(0,r.jsx)("path",{d:"M10.7947 4.85392C10.5734 4.74808 10.4361 4.5421 10.4361 4.31729V1.23071H11.1136C11.4875 1.23071 11.791 0.955029 11.791 0.615354C11.791 0.275678 11.4875 0 11.1136 0H3.88731C3.51335 0 3.20985 0.275678 3.20985 0.615354C3.20985 0.955029 3.51335 1.23071 3.88731 1.23071H4.56477V4.31729C4.56477 4.5421 4.42752 4.74806 4.20531 4.85472C1.92001 5.95498 0.5 8.10298 0.5 10.461C0.5 12.2193 1.2714 13.8528 2.66878 15.0613L2.80341 15.1803C3.39597 15.7038 3.80327 16 5.29549 16H9.7044C11.1957 16 11.604 15.7038 12.1966 15.1803L12.3303 15.0621C13.7295 13.8536 14.5 12.2193 14.5 10.4618C14.5009 8.10214 13.0818 5.95418 10.7947 4.85392ZM4.83933 5.94181C5.50595 5.62101 5.9197 4.9991 5.9197 4.31729V1.23071H9.08119V4.31729C9.08119 4.9991 9.49484 5.62183 10.1606 5.94181C11.7485 6.70649 12.8144 8.10137 13.0773 9.69062C12.3564 10.0163 10.3756 10.6679 7.80212 9.50033C5.35242 8.38694 3.30377 8.65185 2.08163 9.02599C2.49985 7.71816 3.47718 6.59737 4.83933 5.94181ZM11.3963 14.1704L11.2517 14.2976C10.8416 14.6594 10.7179 14.7685 9.7044 14.7685H5.29549C4.28201 14.7685 4.15825 14.6594 3.74816 14.2976L3.60283 14.1704C2.47553 13.1956 1.85404 11.8796 1.85404 10.461C1.85404 10.4545 1.85581 10.4479 1.85581 10.4422C2.51069 10.1304 4.53491 9.3935 7.19688 10.6012C8.51116 11.1985 9.70987 11.3989 10.7279 11.3989C11.7143 11.3989 12.5254 11.21 13.1117 11.0115C12.9735 12.2167 12.3773 13.3228 11.3963 14.1704Z",fill:"currentColor"})})},66315:function(e,i,t){var r=t(57437),n=t(13856);i.Z=e=>(0,r.jsx)(n.J,{width:"5",height:"5",viewBox:"0 0 16 16",...e,children:(0,r.jsx)("path",{d:"M15.5725 2.98422C15.2004 2.50747 14.6027 2.21095 13.7953 2.10109L5.93573 1.03847C5.12827 0.928615 4.47268 1.05426 3.98002 1.41254C3.48587 1.77154 3.17778 2.34809 3.06466 3.12568L2.95519 3.86962H2.54294C0.903457 3.86962 0 4.74055 0 6.32302V12.5466C0 14.1291 0.903457 15 2.54294 15H10.4821C11.9028 15 12.7683 14.3437 12.9752 13.1403C14.1354 13.0499 14.8744 12.3232 15.0671 11.0316L15.9594 4.87124C16.0748 4.09509 15.9438 3.46025 15.5725 2.98422ZM2.54294 4.94662H10.4821C11.4957 4.94662 11.9095 5.3451 11.9095 6.32302V9.9705L9.36205 7.51273C8.88427 7.05249 8.10881 7.05321 7.63326 7.51273L4.52772 10.509L4.06932 10.0659C3.59154 9.60491 2.81608 9.60634 2.34053 10.0659L1.1163 11.247V6.32302C1.1163 5.3451 1.53008 4.94662 2.54294 4.94662ZM10.4821 13.923H2.54294C1.60822 13.923 1.18849 13.5776 1.12821 12.7577L3.12934 10.827C3.16953 10.7889 3.23802 10.7882 3.27969 10.827L3.90189 11.4272C4.2472 11.7611 4.81055 11.7596 5.15437 11.4272L8.42289 8.27385C8.46456 8.23508 8.53305 8.23579 8.57324 8.27385L11.9095 11.4926V12.5466C11.9095 13.5245 11.4957 13.923 10.4821 13.923ZM14.8543 4.72119L13.962 10.8808C13.8541 11.6031 13.5713 11.9671 13.0258 12.0568V6.32302C13.0258 4.74055 12.1223 3.86962 10.4821 3.86962H4.08194L4.16906 3.27731C4.24051 2.79194 4.40196 2.45364 4.65127 2.2727C4.89835 2.09249 5.27863 2.03513 5.77948 2.10477L13.6398 3.1674C14.1428 3.23633 14.4926 3.39211 14.6801 3.63192C14.8677 3.87102 14.9257 4.23726 14.8543 4.72119ZM3.17549 7.64051C3.17549 7.24418 3.50519 6.92252 3.91524 6.92252H3.92124C4.3313 6.92252 4.6639 7.24418 4.6639 7.64051C4.6639 8.03685 4.3313 8.35851 3.92124 8.35851C3.51193 8.35851 3.17549 8.03685 3.17549 7.64051Z",fill:"currentColor"})})},28432:function(e,i,t){var r=t(57437),n=t(82305),a=t(61576),l=t(70996),o=t(25230),s=t(85330);i.Z=e=>{let{children:i,menuButtons:t,borderColor:d,zIndex:c,contentProps:u,display:g,shouldWrapWithPortal:h,portalContainerRef:m,...p}=e;return(0,r.jsx)(n.J,{offset:[0,2],returnFocusOnClose:!1,...p,styleConfig:{baseStyle:{popper:{zIndex:c||10}}},children:e=>{let{isOpen:n,onClose:c}=e,p=(0,r.jsx)(a.y,{bgColor:"black",w:"auto",border:"1px solid",borderColor:d||"inherit",borderRadius:"md",overflow:"hidden",onClick:c,...u,children:t});return(0,r.jsxs)(l.xu,{display:g,h:"fit-content !important",children:[(0,r.jsx)(o.x,{children:"function"==typeof i?i({isOpen:n}):i}),h?(0,r.jsx)(s.h,{containerRef:m,children:p}):p]})}})}},48503:function(e,i,t){t.d(i,{o:function(){return C}});var r=t(12199),n=t(2265),a=t(39954),l=t(5298),o=t(93340),s=t(54944),d=t(50571),c=t(74554);let u={},g=function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u,{fallbackData:t,onStopPolling:r}=i,[a,g]=(0,n.useState)(!1),[h,{data:m,startPolling:p,stopPolling:x}]=(0,l.t)(s.Luf,{variables:{generatedImageId:e},fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0,onCompleted:e=>{e.generated_image_variation_generic.some(e=>e.status===d.v6.PENDING)||(g(!1),x(),null==r||r())}}),f=(null==m?void 0:m.generated_image_variation_generic)||t||[],b=(null==f?void 0:f.filter(e=>e.status===d.v6.PENDING).map(e=>{var i;return{status:e.status,transformType:e.transformType,variant:null===(i=e.upscale_details.find(e=>e.oneClicktype))||void 0===i?void 0:i.oneClicktype}}))||[],v=b.some(e=>e.transformType===o.VARIATION_TYPE.UNZOOM),y=b.some(e=>e.transformType===o.VARIATION_TYPE.NOBG),C=b.some(e=>e.variant===o.VARIATION_ONECLICK_TYPE.ALCHEMY_REFINER),j=b.some(e=>e.variant===o.VARIATION_ONECLICK_TYPE.DEFAULT),I=b.some(e=>e.variant===o.VARIATION_ONECLICK_TYPE.ALTERNATE),S=b.some(e=>e.variant===o.VARIATION_ONECLICK_TYPE.SMOOTH),w=b.some(e=>e.variant===o.VARIATION_ONECLICK_TYPE.HD),k=b.some(e=>e.variant===o.VARIATION_ONECLICK_TYPE.ULTRA),_={[c.TH.UNZOOM]:v,[c.TH.NO_BG]:y,[c.TH.ALCHEMY_REFINER]:C,[c.TH.UPSCALE_DEFAULT]:j,[c.TH.UPSCALE_ALTERNATE]:I,[c.TH.UPSCALE_SMOOTH]:S,[c.TH.UPSCALE_HD]:w,[c.TH.UPSCALE_ULTRA]:k},E=(0,n.useCallback)(async e=>{g(!0),p(e),await h()},[h,p]);return(0,n.useEffect)(()=>{b.length&&!a&&E(1e4)},[b.length,E,a,x]),[E,{pollingVariations:a,pendingVariations:_}]};var h=t(79770),m=t(76566),p=t(84347),x=t(68993),f=t(63832),b=t(45608);let v=()=>f.ZP.dispatch((0,b.hk)()),y={},C=function(e,i){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:y,{fallbackData:l,onComplete:o}=t,[d,u]=(0,n.useState)(!1),[f,{pendingVariations:b}]=g(e||"",{fallbackData:l}),{userSelectedTeam:C}=(0,a.P)(),j=C(),I=i||e,S=I===e,w={arg1:{id:I||"",isVariation:!S,...j.id&&{teamId:j.akUUID}}},k=(0,m.Z)({mutationImageId:w.arg1.id,imageVariationType:c.TH.UPSCALE_DEFAULT,originalImageId:e||""}),_={onCompleted:v,refetchQueries:[{query:s.Hnq,variables:{id:e}}]},[E,{loading:T}]=(0,r.D)(s.QMH,_),[U,{loading:H}]=(0,r.D)(s.YrX,_),[A,{loading:L}]=(0,r.D)(s.sVu,_),[R,{loading:P}]=(0,r.D)(s.sVu,_),[D,{loading:M}]=(0,r.D)(s.sVu,_),[N,{loading:O}]=(0,r.D)(s.sVu,_),{handleGenError:V}=(0,h.c)(),z=T||b[c.TH.NO_BG],W=H||b[c.TH.UNZOOM],Z=L||b[c.TH.ALCHEMY_REFINER],B=d||b[c.TH.UPSCALE_DEFAULT],F=P||b[c.TH.UPSCALE_ALTERNATE],Y=M||b[c.TH.UPSCALE_SMOOTH],G=O||b[c.TH.UPSCALE_HD],q=b[c.TH.UPSCALE_ULTRA],K=async()=>{await f(1e4)};return{alchemyRefinerLoading:Z,upscaleDefaultLoading:B,upscaleAltLoading:F,upscaleHdLoading:G,upscaleSmoothLoading:Y,upscaleLoading:Z||Y||B||F||O||M||q,removeBgLoading:z,unzoomLoading:W,upscaleUltraLoading:q,handleUpscaleDefault:async()=>{u(!0),await k(),u(!1),K(),null==o||o("upscale")},handleRemoveBg:async()=>{try{await E({variables:w}),K(),null==o||o("remove-bg")}catch(e){if((0,p.D)(e)&&(0,p.c)({error:e,onError:V})||(0,x.b)(e)&&(0,x.N)({error:e,onError:V}))return;throw e}},handleUnzoom:async()=>{try{await U({variables:w}),K(),null==o||o("unzoom")}catch(e){if((0,p.D)(e)&&(0,p.c)({error:e,onError:V})||(0,x.b)(e)&&(0,x.N)({error:e,onError:V}))return;throw e}},handleAlchemyRefiner:async(e,i,t,r)=>{try{await A({variables:{arg1:{...w.arg1,...t&&{id:t},alchemyRefiner:!0,alchemyRefinerCreative:i,alchemyRefinerStrength:e,alternativeUpscale:!1,hdUpscale:!1,smoothUpscale:!1}},...r&&{refetchQueries:r}}),await K()}catch(e){if((0,x.b)(e)&&(0,x.N)({error:e,onError:V}))return;throw e}},handleUpscaleAlt:async()=>{await R({variables:{arg1:{...w.arg1,alternativeUpscale:!0,hdUpscale:!1,smoothUpscale:!1}}}),K(),null==o||o("upscale")},handleUpscaleSmooth:async(e,i)=>{try{await D({variables:{arg1:{...w.arg1,...e&&{id:e},alternativeUpscale:!1,hdUpscale:!1,smoothUpscale:!0}},...i&&{refetchQueries:i}}),K(),null==o||o("upscale")}catch(e){if((0,p.D)(e)&&(0,p.c)({error:e,onError:V})||(0,x.b)(e)&&(0,x.N)({error:e,onError:V}))return;throw e}},handleUpscaleHd:async(e,i)=>{try{await N({variables:{arg1:{...w.arg1,...e&&{id:e},alternativeUpscale:!1,hdUpscale:!0,smoothUpscale:!1}},...i&&{refetchQueries:i}}),K(),null==o||o("upscale")}catch(e){if((0,p.D)(e)&&(0,p.c)({error:e,onError:V})||(0,x.b)(e)&&(0,x.N)({error:e,onError:V}))return;throw e}},handleReport:async()=>{null==o||o("report")},handleDelete:()=>{null==o||o("delete")},openAlchemyRefinerModal:()=>{null==o||o("alchemy-refiner")},startPollingImageVariations:f}}},64855:function(e,i,t){t.d(i,{u:function(){return m}});var r=t(50571),n=t(82306),a=t(74554),l=t(91850);let o=()=>(0,n.N9)({cost:r.Ye.UPSCALE_ALCHEMY,token:r.L4.VARIATION}),s=()=>(0,n.N9)({cost:r.Ye.UPSCALE,token:r.L4.VARIATION}),d=()=>(0,n.N9)({cost:r.Ye.UNZOOM,token:r.L4.VARIATION}),c=()=>(0,n.N9)({cost:r.Ye.NOBG,token:r.L4.VARIATION}),u=e=>{let{generated_image_variation_generics:i,imageVariationType:t,image:r}=e,{hasHitLimitUpscaleDefault:n,hasHitLimitUpscaleAlternate:u,hasHitLimitUpscaleSmooth:g,hasHitLimitUpscaleHd:h,hasHitLimitUnzoom:m,hasHitLimitNoBg:p}=(0,l.tB)(i),x=r?(0,l.Je)(r):[],f=(0,l.KY)({availableVariations:x,variation:"UPSCALE"}),b=(0,l.KY)({availableVariations:x,variation:"UNZOOM"}),v=(0,l.KY)({availableVariations:x,variation:"NOBG"});switch(t){case a.TH.ALCHEMY_REFINER:return!o();case a.TH.UPSCALE_DEFAULT:{let e=s();return n||!e||!f}case a.TH.UPSCALE_ALTERNATE:{let e=s();return u||!e||!f}case a.TH.UPSCALE_SMOOTH:{let e=s();return g||!e||!f}case a.TH.UPSCALE_HD:{let e=s();return h||!e||!f}case a.TH.UNZOOM:let y=d();return m||!y||!b;case a.TH.NO_BG:let C=c();return p||!C||!v;default:throw Error("isVariationDisabled: Unhandled image variation type")}},g=e=>{let{generated_image_variation_generics:i,image:t}=e,r=u({generated_image_variation_generics:i,image:t,imageVariationType:a.TH.ALCHEMY_REFINER}),n=u({generated_image_variation_generics:i,image:t,imageVariationType:a.TH.UPSCALE_DEFAULT}),l=u({generated_image_variation_generics:i,image:t,imageVariationType:a.TH.UPSCALE_ALTERNATE}),o=u({generated_image_variation_generics:i,image:t,imageVariationType:a.TH.UPSCALE_SMOOTH});return{isDisabledAlchemyRefiner:r,isDisabledUpscaleDefault:n,isDisabledUpscaleAlternate:l,isDisabledUpscaleSmooth:o,isDisabledUpscaleHd:u({generated_image_variation_generics:i,image:t,imageVariationType:a.TH.UPSCALE_HD}),isDisabledUnzoom:u({generated_image_variation_generics:i,image:t,imageVariationType:a.TH.UNZOOM}),isDisabledNobg:u({generated_image_variation_generics:i,image:t,imageVariationType:a.TH.NO_BG})}},h={id:"",transformType:null,upscale_details:[],url:null},m=function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h;return g({generated_image_variation_generics:e||[],image:i})}},65355:function(e,i,t){t.d(i,{o:function(){return n}});var r=t(53686);let n=e=>{if(!e)return!1;let i=(0,r.dU)(e.sdVersion),t=(0,r.BF)(e.sdVersion),n=(0,r.L6)(e.sdVersion);return!t&&!n&&(!i||!!(null==e?void 0:e.alchemy))}},17180:function(e,i,t){var r=t(2265);i.Z=function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,[t,n]=(0,r.useState)(e.getTime()-Date.now());return(0,r.useEffect)(()=>{let t=setInterval(()=>{let i=Date.now(),r=e.getTime()-i;r>0?n(r):(n(0),clearInterval(t))},i);return()=>clearInterval(t)},[e,i]),t}},76566:function(e,i,t){var r=t(45008),n=t(2559),a=t(39954),l=t(79770),o=t(69557),s=t(84347),d=t(68993),c=t(74449),u=t(12088),g=t(91850),h=t(75365),m=t(45608);function p(){let e=(0,r._)(["\n										fragment NewVariation on generated_image_variation_generic {\n											url\n											status\n											createdAt\n											id\n											transformType\n											upscale_details {\n												oneClicktype\n											}\n											__typename\n										}\n									"]);return p=function(){return e},e}let x=e=>{let{generatedImageId:i,id:t,imageVariationType:r}=e,n=(0,g.VP)(r),a=(0,g.ue)(r);return{status:o.j.PENDING,url:null,createdAt:new Date().toISOString(),generatedImageId:i,id:t,transformType:a,upscale_details:[{oneClicktype:n}],__typename:"generated_image_variation_generic"}};i.Z=e=>{let{originalImageId:i,imageVariationType:t,mutationImageId:r,isVariation:o}=e,f=(0,c.T)(),{userSelectedTeam:b}=(0,a.P)(),v=b(),{handleGenError:y}=(0,l.c)();return async e=>{let a=(null==e?void 0:e.originalImageId)||i,l=(null==e?void 0:e.mutationImageId)||r;f((0,h.G8)({imageId:a,imageVariationType:t}));let c={...(0,g.Yl)(t),imageId:l,isVariation:o,...v.id&&{teamId:v.akUUID}},{mutation:b,arg1:C,mutationResponseKey:j}=(0,g.u2)(c);try{await u.ZP.mutate({mutation:b,variables:{arg1:C},update(e,i){let{data:r}=i,l=null==r?void 0:r[j].id;if(!l)throw Error("Error in useGenerateVariation: variationId invalid or undefined.");e.modify({id:e.identify({__typename:"generated_images",id:a}),fields:{generated_image_variation_generics(){let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],{readField:r}=arguments.length>1?arguments[1]:void 0,o=e.writeFragment({data:x({generatedImageId:a,id:l,imageVariationType:t}),fragment:(0,n.Ps)(p())});return i.some(e=>r("id",e)===l)?i:[...i,o]}}})}}),f((0,m.hk)())}catch(e){if((0,s.D)(e)&&(0,s.c)({error:e,onError:y})||(0,d.b)(e)&&(0,d.N)({error:e,onError:y}))return;throw e}}}}}]);